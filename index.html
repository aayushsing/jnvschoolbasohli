<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JNV Basohli ‚Äì Student Management (App Mode)</title>

<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b0f14;
  --card:#121826;
  --muted:#93a4b7;
  --text:#e6efff;
  --brand:#00e5ff;
  --brand2:#7a5cff;
  --danger:#ff4d4d;
  --ok:#39d98a;
  --warn:#ffb020;
  --stroke:rgba(255,255,255,0.06);
  --glow:0 0 0 1px rgba(122,92,255,0.15), 0 12px 30px -10px rgba(0,229,255,0.25);
  --radius:16px;
}

/* Light theme overrides */
body[data-theme="light"]{
  --bg:#f3f4f8;
  --card:#ffffff;
  --muted:#4b5563;
  --text:#111827;
  --brand:#0ea5e9;
  --brand2:#6366f1;
  --danger:#dc2626;
  --ok:#16a34a;
  --warn:#d97706;
  --stroke:rgba(15,23,42,0.08);
  --glow:0 0 0 1px rgba(99,102,241,0.15), 0 12px 30px -10px rgba(15,23,42,0.15);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:
    radial-gradient(1200px 700px at 10% -10%, rgba(0,229,255,0.06), transparent 60%),
    radial-gradient(1000px 600px at 110% -20%, rgba(122,92,255,0.06), transparent 60%),
    var(--bg);
  color:var(--text); font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial; line-height:1.45;
}

/* Top App Bar */
.appbar{
  position:sticky; top:0; z-index:1000; backdrop-filter:saturate(180%) blur(10px);
  background:linear-gradient(180deg, rgba(11,15,20,0.9), rgba(11,15,20,0.6));
  border-bottom:1px solid var(--stroke);
  display:flex; align-items:center; gap:12px; padding:10px 14px;
}
body[data-theme="light"] .appbar{
  background:linear-gradient(180deg, rgba(243,244,248,0.96), rgba(243,244,248,0.9));
}
.appbar .logo{
  width:40px; height:40px; border-radius:12px; overflow:hidden; display:grid; place-items:center;
  background:linear-gradient(135deg, rgba(0,229,255,0.2), rgba(122,92,255,0.2));
  box-shadow:inset 0 0 0 1px var(--stroke);
}
.appbar .logo img{width:28px; height:28px; border-radius:8px; object-fit:cover}
.appbar h1{font-size:1.05rem; margin:0; font-weight:700; letter-spacing:0.2px}
.appbar .spacer{flex:1}
.badge{
  font-size:.75rem; padding:4px 8px; border-radius:999px; color:#00131a;
  background:linear-gradient(180deg, var(--brand), #00c2d6); font-weight:700;
  box-shadow:var(--glow);
}

/* Layout */
#app{display:none}
.container{padding:16px; max-width:1100px; margin:0 auto}

/* Drawer (sidebar) */
.drawer{
  position:fixed; top:56px; left:0; bottom:0; width:300px; max-width:85vw;
  background:rgba(18,24,38,0.9); backdrop-filter: blur(10px);
  border-right:1px solid var(--stroke);
  transform:translateX(-101%); transition:transform .25s ease; z-index:999;
}
body[data-theme="light"] .drawer{
  background:rgba(255,255,255,0.96);
}
.drawer.open{transform:translateX(0)}
.drawer .group{padding:14px}
.drawer h4{margin:8px 8px 12px; font-size:.9rem; color:var(--muted); font-weight:600}
.drawer button, .toolbar-btn{
  width:100%; text-align:left; background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border:1px solid var(--stroke); color:var(--text); padding:12px 12px; margin:8px 0; border-radius:12px; cursor:pointer;
  font-weight:600; transition:all .2s ease; display:flex; align-items:center; gap:10px;
}
.drawer button:hover{box-shadow:var(--glow); transform:translateY(-1px)}
.toolbar{
  display:flex; gap:10px; flex-wrap:wrap; margin:10px 0 2px;
}
.toolbar .toolbar-btn{width:auto; display:inline-flex; border-radius:999px; padding:10px 12px}

/* Search & filters */
.filters{
  display:flex; flex-wrap:wrap; gap:10px; margin:10px 0 16px;
}
input,select,button{
  background:rgba(255,255,255,0.04); border:1px solid var(--stroke); color:var(--text);
  padding:10px 12px; border-radius:12px; outline:none; font-size:.95rem;
}
body[data-theme="light"] input,
body[data-theme="light"] select,
body[data-theme="light"] button{
  background:rgba(15,23,42,0.02);
}
input::placeholder{color:#7e8da0}
button.primary{
  background:linear-gradient(90deg, var(--brand), var(--brand2)); border:none; color:#00131a;
  font-weight:800; letter-spacing:.2px; box-shadow:var(--glow); cursor:pointer;
}
button.ghost{background:transparent}
button.warn{background:linear-gradient(90deg, #ff7750, #ff4d4d); border:none; color:#200}
button.ok{background:linear-gradient(90deg, #39d98a, #12b886); border:none; color:#002412}

/* Cards grid */
.grid{
  display:grid; grid-template-columns:repeat(auto-fill, minmax(260px,1fr)); gap:14px;
}
.card{
  position:relative;
  background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border:1px solid var(--stroke); border-radius:var(--radius); padding:14px; box-shadow:var(--glow); min-height:120px;
}
body[data-theme="light"] .card{
  background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.94));
}
.card .avatar{
  width:68px; height:68px; border-radius:50%; background:linear-gradient(135deg, rgba(0,229,255,.2), rgba(122,92,255,.2));
  display:grid; place-items:center; overflow:hidden; border:1px solid var(--stroke); margin-bottom:8px;
}
.card .avatar img{width:100%; height:100%; object-fit:cover}
.card h3{margin:6px 0 2px; font-size:1.02rem}
.meta{font-size:.86rem; color:var(--muted)}
.kv{display:grid; grid-template-columns:90px 1fr; gap:6px; font-size:.9rem; margin:8px 0}
.kv div:nth-child(odd){color:var(--muted)}
.actions{display:flex; gap:8px; margin-top:10px; flex-wrap:wrap}

/* Small edit icon on card */
.edit-icon{
  position:absolute;
  top:10px;
  right:10px;
  width:28px;
  height:28px;
  border-radius:999px;
  border:1px solid var(--stroke);
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(255,255,255,0.06);
  cursor:pointer;
  font-size:15px;
  padding:0;
}
body[data-theme="light"] .edit-icon{
  background:rgba(15,23,42,0.04);
}
.edit-icon:hover{
  box-shadow:var(--glow);
  transform:translateY(-1px);
}

/* Tables */
.table{width:100%; border-collapse:collapse; background:rgba(255,255,255,0.02); border:1px solid var(--stroke); border-radius:12px; overflow:hidden}
.table th,.table td{border-bottom:1px solid var(--stroke); padding:10px; text-align:left; font-size:.92rem}
.table th{color:#b8c7da; background:rgba(255,255,255,0.03)}
body[data-theme="light"] .table th{
  color:#111827;
  background:rgba(243,244,248,0.9);
}
.table tr:last-child td{border-bottom:none}

/* Sections */
.section{display:none; margin-top:10px}
.section.active{display:block}

/* Login card */
#loginView{
  min-height:100vh; display:grid; place-items:center; padding:20px;
  background:
    radial-gradient(600px 300px at 10% 0%, rgba(122,92,255,0.18), transparent 60%),
    radial-gradient(700px 300px at 90% 0%, rgba(0,229,255,0.18), transparent 60%), var(--bg);
}
.login-card{
  width:min(420px, 92vw); background:linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.03));
  border:1px solid var(--stroke); border-radius:20px; padding:20px 18px; box-shadow:var(--glow)
}
body[data-theme="light"] .login-card{
  background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96));
}
.login-card h2{margin:6px 2px 2px}
.helper{font-size:.9rem; color:var(--muted); margin:2px 2px 12px}
.row{display:flex; gap:8px; flex-wrap:wrap}
.row>*{flex:1}

/* Pills */
.pills{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px}
.pill{font-size:.75rem; border:1px solid var(--stroke); padding:6px 8px; border-radius:999px; color:var(--muted)}

/* Floating drawer button */
.menu-btn{
  border-radius:12px; border:1px solid var(--stroke); background:rgba(255,255,255,0.04);
  padding:8px 10px; cursor:pointer; display:inline-flex; align-items:center; gap:8px; font-weight:700;
}
.menu-btn:hover{box-shadow:var(--glow)}

/* Hidden utility */
.hidden{display:none !important}

/* Load more */
.loadmore{margin:16px auto; display:block}

/* Responsive tighten */
@media (max-width: 560px){
  .kv{grid-template-columns:82px 1fr}
}

/* --- Logo: smaller & circular --- */
.appbar .logo,
.login-card .logo,
.logo{
  width: 32px !important;
  height: 32px !important;
  border-radius: 50% !important;
}
.appbar .logo img,
.login-card .logo img,
.logo img{
  width: 24px !important;
  height: 24px !important;
  border-radius: 50% !important;
  object-fit: cover !important;
}

/* --- App bar title: prevent overflow on mobile --- */
.appbar h1{
  font-size: .98rem; 
  margin: 0; 
  font-weight: 700; 
  letter-spacing: .2px;
  max-width: 55vw;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* --- Mobile fit & readability tweaks --- */
@media (max-width: 480px){
  .container{ padding: 12px; }
  .appbar{ padding: 8px 10px; }
  .appbar h1{ font-size: .9rem; max-width: 52vw; }
  .menu-btn{ padding: 6px 8px; font-size: .9rem; }
  .badge{ font-size: .7rem; padding: 3px 7px; }

  .login-card{ width: 95vw; padding: 16px 14px; }
  .login-card h2{ font-size: 1rem; line-height: 1.2; }
  input, select, button{ font-size: .9rem; padding: 9px 10px; }

  .grid{ grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 10px; }
  .card{ padding: 12px; }
  .card .avatar{ width: 58px; height: 58px; }

  .filters{ gap: 8px; }
  .drawer{ width: 280px; }
}

/* --- Small running name (marquee) next to "Signed in as" --- */
.ticker{
  display:inline-flex; align-items:center; gap:8px;
  border:1px solid var(--stroke); border-radius:999px;
  padding:6px 10px; margin-left:8px;
  max-width:420px; overflow:hidden; background:rgba(255,255,255,0.04);
}
.ticker span{
  display:inline-block; white-space:nowrap; padding-left:100%;
  animation:ticker-move 14s linear infinite;
  font-size:.86rem; color:var(--muted);
}
@keyframes ticker-move{ to { transform: translateX(-100%); } }

/* Mobile sizing for the running name */
@media (max-width:480px){
  .ticker{ max-width:58vw; padding:5px 8px; }
  .ticker span{ font-size:.8rem; }
}

/* Modal for editing student */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2000;
}
.modal-card{
  background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
  border-radius:16px;
  border:1px solid var(--stroke);
  padding:18px;
  max-width:520px;
  width:95vw;
  box-shadow:var(--glow);
}
body[data-theme="light"] .modal-card{
  background:linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.96));
}
.modal-header{
  display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;
}
.modal-header h3{margin:0; font-size:1rem;}
.modal-actions{
  display:flex; justify-content:flex-end; gap:10px; margin-top:12px;
}

/* Hostel count chips */
.stats-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin:10px 0 14px;
}
.stat-chip{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid var(--stroke);
  background:rgba(255,255,255,0.04);
  font-size:.86rem;
  color:var(--muted);
}
.stat-chip b{color:var(--text)}
body[data-theme="light"] .stat-chip{
  background:rgba(15,23,42,0.02);
}
</style>
</head>
<body data-theme="dark">

<!-- LOGIN VIEW -->
<section id="loginView">
  <div class="login-card">
    <div style="display:flex; align-items:center; gap:10px">
      <div class="logo"><img src="jnv image.jpg" alt="JNV"></div>
      <div>
        <h2>JNV Basohli ‚Äì Student Management</h2>
      </div>
    </div>

    <label>Email / Admission No</label>
    <input id="email" placeholder="e.g. sankalp@gmail.com or JNVT001" autocomplete="username" />

    <div class="row">
      <div style="flex:2">
        <label>Password</label>
        <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />
      </div>
      <div style="flex:1; display:flex; align-items:flex-end">
        <button class="primary" style="width:100%" id="loginBtn">Login</button>
      </div>
    </div>

    <div id="loginError" class="helper" style="color:#ff4d4d; display:none;"></div>
  </div>
</section>

<!-- APP VIEW -->
<section id="app">
  <!-- App Bar -->
  <div class="appbar">
    <button class="menu-btn" id="openDrawerBtn">‚ò∞ Menu</button>
    <div class="logo"><img src="jnv image.jpg" alt="JNV"></div>
    <h1>JNV Basohli</h1>
    <div class="spacer"></div>
    <button id="themeToggleBtn" class="toolbar-btn" style="width:auto;" aria-label="Toggle theme">üåô</button>
    <span id="roleBadge" class="badge">ROLE</span>
    <button id="logoutBtn" class="toolbar-btn">Logout</button>
  </div>

  <!-- Drawer -->
  <aside class="drawer" id="drawer">
    <div class="group">
      <h4>Navigate</h4>
      <button data-section="students">üë• Students</button>
      <button data-section="leaveManagement" class="rbac r-teacher1">üìù Leave Management</button>
      <button data-section="timetable" class="rbac r-teacher2">üìÖ Timetable</button>
      <button data-section="hostelTasks" class="rbac r-teacher1">üè† Hostel Tasks</button>

      <button id="verificationBtn" class="rbac r-teacher1" onclick="window.open('https://aayushsing.github.io/Student-Verification-System/','_blank')">ü™™ Student Verification Card</button>
    </div>
    <div class="group">
      <h4>Data</h4>
      <button id="uploadBtn" class="rbac r-teacher1">‚¨ÜÔ∏è Upload Students Excel</button>
      <input type="file" id="uploadExcel" accept=".xlsx,.xls" class="hidden">
      <button id="exportStudentsBtn" class="rbac r-teacher1 r-teacher2">‚¨áÔ∏è Export Students</button>
      <button id="addStudentMenuBtn" class="rbac r-teacher1">‚ûï Add / Manage Students</button>
      <button class="menu-btn rbac r-teacher1" onclick="loadStudentData()">üì• Load Core Student Data</button>
    </div>
  </aside>

  <main class="container">
    <!-- Toolbar -->
    <div class="toolbar">
      <div id="whoami" class="pill">Signed in as: <span id="whoamiText">‚Äî</span></div>
      <div class="ticker" aria-label="School name">
        <span>Pm Shri Jawahar Navodaya Vidyalaya Basohli pincode 184201 ‚Ä¢ Pm Shri Jawahar Navodaya Vidyalaya Basohli pincode 184201 ‚Ä¢ </span>
      </div>
    </div>

    <!-- Students -->
    <section id="students" class="section active">
      <h2>Students</h2>

      <!-- Hostel-wise counts (AUTO updates) -->
      <div id="hostelStats" class="stats-row" aria-live="polite"></div>

      <!-- Manual add student for Teacher1 -->
      <div id="addStudentPanel" class="card rbac r-teacher1 hidden" style="margin-bottom:14px;">
        <h3 style="margin-top:0;">Add Student (Teacher1)</h3>
        <div class="filters">
          <input id="newAdmissionNo" placeholder="Admission No" />
          <input id="newStudentName" placeholder="Name" />
          <input id="newClass" placeholder="Class (e.g. IX A)" />
          <select id="newHostel">
            <option value="">Hostel</option>
            <option>Aravali</option>
            <option>Nilgiri</option>
            <option>Shivalik</option>
            <option>Udaigiri</option>
          </select>
          <input id="newPhone" placeholder="Phone" />
          <input id="newEmail" placeholder="Email" />
          <input id="newFather" placeholder="Father Name" />
          <input id="newMother" placeholder="Mother Name" />
          <input id="newAddress" placeholder="Address" style="flex:1 1 100%;" />
          <button id="addStudentBtn" class="primary">Add Student</button>
        </div>
      </div>

      <div class="filters">
        <input id="studentSearch" placeholder="Search by name or admission no" />
        <select id="hostelFilter">
          <option value="">All Hostels</option>
          <option>Aravali</option>
          <option>Nilgiri</option>
          <option>Shivalik</option>
          <option>Udaigiri</option>
        </select>
      </div>

      <div id="studentGrid" class="grid" aria-live="polite"></div>
      <button id="loadMoreBtn" class="toolbar-btn loadmore hidden">Load more</button>
    </section>

    <!-- Leave Management -->
    <section id="leaveManagement" class="section">
      <h2>Leave Management</h2>
      <div class="filters">
        <input id="leaveSearchInput" placeholder="Search student by Admission No or Name" />
        <select id="leaveStudent"></select>
        <div class="pill">Type:</div>
        <label class="pill"><input type="radio" name="leaveType" value="partial" checked> Partial</label>
        <label class="pill"><input type="radio" name="leaveType" value="full"> Full Day</label>
      </div>
      <div class="filters">
        <input type="date" id="leaveFrom">
        <input type="date" id="leaveTo">
        <input type="text" id="leaveReason" placeholder="Reason" />
        <input type="text" id="leaveParent" placeholder="Parent Name" />
        <button id="applyLeaveBtn" class="primary">Apply Leave</button>
        <button id="downloadLeaveHistoryBtn" class="toolbar-btn">Export Leave History</button>
      </div>
      <table id="leaveHistory" class="table"></table>
    </section>

    <!-- Timetable -->
    <section id="timetable" class="section">
      <h2>Timetable</h2>
      <div class="filters">
        <select id="ttClass">
          <option>6-A</option><option>6-B</option>
          <option>7-A</option><option>7-B</option>
          <option>8-A</option><option>8-B</option>
          <option>9-A</option><option>9-B</option>
          <option>10-A</option><option>10-B</option>
          <option>11-A</option><option>11-B</option>
          <option>12-A</option><option>12-B</option>
        </select>
        <input type="date" id="ttDate">
        <input type="time" id="ttTime">
        <input type="text" id="ttTopic" placeholder="Topic">
        <input type="text" id="ttTeacher" placeholder="Teacher Name">
        <button id="addTimetableBtn" class="primary rbac r-teacher2">Add</button>
        <button id="downloadTimetableBtn" class="toolbar-btn">Export Timetable</button>
      </div>
      <table id="timetableTable" class="table"></table>
    </section>

    <!-- Hostel Tasks -->
    <section id="hostelTasks" class="section">
      <h2>Hostel Tasks Management</h2>
      <div class="filters">
        <select id="taskHostel">
          <option>Aravali</option>
          <option>Nilgiri</option>
          <option>Shivalik</option>
          <option>Udaigiri</option>
        </select>
        <input type="date" id="taskDate">
        <input type="text" id="taskDesc" placeholder="Task Description">
        <button id="addTaskBtn" class="primary">Add Task</button>
        <button id="downloadTasksBtn" class="toolbar-btn">Export Tasks</button>
      </div>
      <table id="taskTable" class="table"></table>
    </section>
  </main>
</section>

<!-- Student Edit Modal -->
<div id="studentModalBackdrop" class="modal-backdrop hidden">
  <div class="modal-card">
    <div class="modal-header">
      <h3>Edit Student</h3>
      <button id="editCloseBtn" class="toolbar-btn" style="width:auto;">‚úï</button>
    </div>
    <div class="helper" style="margin-bottom:8px;">Admission No: <strong id="editAdmissionNo">‚Äî</strong></div>
    <div class="filters" style="margin-top:4px;">
      <input id="editName" placeholder="Name" />
      <input id="editClass" placeholder="Class (e.g. IX A)" />
      <select id="editHostel">
        <option value="">Hostel</option>
        <option>Aravali</option>
        <option>Nilgiri</option>
        <option>Shivalik</option>
        <option>Udaigiri</option>
      </select>
      <input id="editPhone" placeholder="Phone" />
      <input id="editEmail" placeholder="Email" />
      <input id="editFather" placeholder="Father Name" />
      <input id="editMother" placeholder="Mother Name" />
      <input id="editAddress" placeholder="Address" style="flex:1 1 100%;" />
    </div>
    <div class="modal-actions">
      <button id="editCancelBtn" class="toolbar-btn">Cancel</button>
      <button id="editSaveBtn" class="primary" style="width:auto;">Update</button>
    </div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<script>
"use strict";

/* ==========================
   THEME TOGGLE
========================== */
const THEME_KEY = "jnv_theme";

function applyTheme(theme){
  if(theme !== "light" && theme !== "dark") theme = "dark";
  document.body.setAttribute("data-theme", theme);
  const btn = document.getElementById("themeToggleBtn");
  if(btn){
    if(theme === "dark"){
      btn.textContent = "üåô";
      btn.setAttribute("aria-label", "Switch to light mode");
    }else{
      btn.textContent = "‚òÄÔ∏è";
      btn.setAttribute("aria-label", "Switch to dark mode");
    }
  }
  localStorage.setItem(THEME_KEY, theme);
}

const savedTheme = localStorage.getItem(THEME_KEY) || "dark";
applyTheme(savedTheme);

/* ==========================
   DATA
========================== */
const users = [
  {email:"sankalp@gmail.com",   password:"1234", role:"teacher1", name:"Sankalp"},
  {email:"reetwik@gmail.com",   password:"4321", role:"teacher1", name:"Reetwik"},
  {email:"kalyani@gmail.com",   password:"98745",role:"teacher2", name:"Kalyani"},
  {email:"aayush@gmail.com",    password:"1234", role:"student",  admissionNo:"2912", name:"HARI NITHAR"},
  {email:"rohan@gmail.com",     password:"1234", role:"student",  admissionNo:"JNVT002", name:"Rohan Sharma"},
  {email:"priya@gmail.com",     password:"1234", role:"student",  admissionNo:"JNVT003", name:"Priya Verma"},
  {email:"parent@gmail.com",    password:"1234", role:"parent",   admissionNo:"JNVT001", name:"Parent of Aayush"}
];

/* NOTE: "house" removed. Hostel-wise counts will be shown & auto-updated. */
const coreStudents = [
  // ===================== ARAVALI =====================
  { admissionNo: "2912", name: "HARI NIHAR", class: "IX A", hostel: "Aravali", phone: "7780851610", email: "harinihar@gmail.com", img: "", fatherName: "SANJEEV KUMAR", motherName: "MEENIKSHI MEHRA", address: "V.P.O BHADDU TESHIL BILLAWAR DIST KATHU" },
  { admissionNo: "2904", name: "MOHIT KUMAR", class: "IX A", hostel: "Aravali", phone: "7889519688", email: "mohitkumar@gmail.com", img: "", fatherName: "SHAM LAL", motherName: "TOSHI DEVI", address: "V.P.O JARNOTA TESHIL BASOHLI DIST KATHUA" },
  { admissionNo: "2960", name: "SHARAB AHMED MALIK", class: "IX A", hostel: "Aravali", phone: "7006458872", email: "sharabahmedmalik@gmail.com", img: "", fatherName: "SHABIR AHMED", motherName: "BUSHRAY BEGUM", address: "VILLAGE BADNOTA TEH LOHAI MALHAR,DIST KATHUA" },
  { admissionNo: "2891", name: "SPARSH SINGH", class: "IX A", hostel: "Aravali", phone: "7006195102", email: "sparshsingh@gmail.com", img: "", fatherName: "RAJENDAR", motherName: "RANJANA PUNIA", address: "VILLAGE KALARI TESHIL KATHUA DIST KATHUA" },
  { admissionNo: "2917", name: "SUDHANSHU SONI", class: "IX A", hostel: "Aravali", phone: "9541344600", email: "sudhanshusoni@gmail.com", img: "", fatherName: "MANGU RAM", motherName: "SUSHMA DEVI", address: "V.P.O PANDORI,TEHSIL NAGRI PAROLE,DISTRICT KATHUA,JAMMU &KASHMIR," },
  { admissionNo: "2875", name: "VANSHIK MANKOTIA", class: "IX A", hostel: "Aravali", phone: "9622129129", email: "vanshikmankotia@gmail.com", img: "", fatherName: "GURDEV SINGH", motherName: "SHILPY RAJPUT", address: "VILLAGE BAKTHPUR TESHIL BILLAWAR DIST KATHUA" },
  { admissionNo: "4054", name: "DAKSH VERMA", class: "IX A", hostel: "Aravali", phone: "9622492267", email: "dakshverma@gmail.com", img: "", fatherName: "SATISHKUMAR", motherName: "RANIDEVI", address: "V.P.O JARNOTA TESHIL BASOHLI DIST KATHUA" },
  { admissionNo: "4056", name: "PRINCE VERMA", class: "IX B", hostel: "Aravali", phone: "9622218975", email: "princeverma@gmail.com", img: "", fatherName: " MINTU KUMAR", motherName: " POONAM DEVI", address: "VILL. DRAMAN, TEHSIL BASOHLI, P/O DRAMAN,KATHUA, J&K, 184201" },
  { admissionNo: "2840", name: "DHEERAJ SHARMA", class: "X A", hostel: "Aravali", phone: "9419129902", email: "dheerajsharma@gmail.com", img: "", fatherName: " RAM PARSHAD", motherName: " KAILASH", address: "VILL. MEARTH, P.O. BUDHI, TESHIL & DISTT. KATHUA PIN. 184143" },
  { admissionNo: "2781", name: "MANIK BOURNEY", class: "X A", hostel: "Aravali", phone: "9697175274", email: "manikbourney@gmail.com", img: "", fatherName: " TILAK RAJ", motherName: " SAMBO DEVI", address: "WARD NO. 3 NEAR GMS DADWARA, P.O. BHADDU, TESHIL. BILLAWAR, DISTT. KATHUA PIN. 184203" },
  { admissionNo: "2855", name: "BHANU PARTAP", class: "X B", hostel: "Aravali", phone: "7889583545", email: "bhanupartap@gmail.com", img: "", fatherName: "LAJJAY RAM", motherName: "RANI DEVI", address: "VPO. NAGRI PAROLE TESHIL. NAGRI PAROLE, DISTT. KATHUA PIN. 184151" },
  { admissionNo: "2803", name: "DHEERAJ BHAGAT", class: "X B", hostel: "Aravali", phone: "9622320075", email: "dheerajbhagat@gmail.com", img: "", fatherName: "PARSHOTAM LAL", motherName: "ANJANA DEVI", address: "VILL. JAGATPUR MARHEEN, TESHIL. MARHEEN DISTT. KATHUA PIN. 184148" },
  { admissionNo: "4024", name: "DHRUB KESAR", class: "X B", hostel: "Aravali", phone: "6005268289", email: "dhrubkesar@gmail.com", img: "", fatherName: "PAWAN KUMAR", motherName: "SUSHMA DEVI", address: "VILL. KATHEEL DHANGU TESHIL.  MAJALTA DISTT. UDHAMPUR, P.O PEOUNI PIN. 182117" },
  { admissionNo: "2815", name: "GAJIT KUMAR", class: "X B", hostel: "Aravali", phone: "7006236041", email: "gajitkumar@gmail.com", img: "", fatherName: "NARESH KUMAR", motherName: "SONU DEVI", address: "WARD NO. 3 VILL SANOHI P.O. TAPPER, TESHIL BANI, DISTT. KATHUA PIN. 184206" },
  { admissionNo: "2854", name: "MAHEE BILLOWRIA", class: "X B", hostel: "Aravali", phone: "9697162402", email: "maheebillowria@gmail.com", img: "", fatherName: "HARDEEP SINGH", motherName: "NEERAJ BALA", address: "VILL. BARWAL, TESHIL & DISTT. KATHUA PIN. 184143" },
  { admissionNo: "2797", name: "RUDRA VERMA", class: "X B", hostel: "Aravali", phone: "6005238677", email: "rudraverma@gmail.com", img: "", fatherName: "RAKESH KUMAR", motherName: "REKHA RANI", address: "VPO. KHANPUR, TESHIL. MARHEEN, DISTT. KATHUA PIN. 184148" },
  { admissionNo: "2827", name: "SANGAM FACKOLU", class: "X B", hostel: "Aravali", phone: "9149710375", email: "sangamfackolu@gmail.com", img: "", fatherName: "MUKESH KUMAR", motherName: "VEENA DEVI", address: "WARD NO. 5, NEAR SHIV TEMPLE, VILL. THANA, P.O. PLASSI, TESHIL. BASOHLI DISTT. KATHUA PIN.184201" },
  { admissionNo: "2762", name: "ARYAN SATYAL", class: "XI C", hostel: "Aravali", phone: "6006512829", email: "aryansatyal@gmail.com", img: "", fatherName: "JEET KUMAR", motherName: "SUSHMA RANI", address: "R/O NANAN P/O GHATI TESHIL& DISTT. KATHUA PIN. 184201" },
  { admissionNo: "2733", name: "PUSHPAL SINGH", class: "XI B", hostel: "Aravali", phone: "9149664731", email: "pushpalsingh@gmail.com", img: "", fatherName: "SANJAY SINGH", motherName: "PINKY DEVI", address: "VPO. MALHAR TESHIL. LOHAI-MALHAR DISTT. KATHUA PIN. 184204" },
  { admissionNo: "2709", name: "RAJESH KATAL", class: "XI B", hostel: "Aravali", phone: "7298356210", email: "rajeshkatal@gmail.com", img: "", fatherName: "KAKA RAM KATAL", motherName: "KANTA DEVI", address: "VPO. WNO. POONDA TESHIL. MAHANPUR DISTT. KATHUA PIN. 184201" },
  { admissionNo: "2603", name: "DEEP KUMAR", class: "XII A", hostel: "Aravali", phone: "8082206251", email: "deepkumar@gmail.com", img: "", fatherName: "OM PRAKASH", motherName: "SUSHMA DEVI", address: "SERU BANI KATHUA 184206" },
  { admissionNo: "2866", name: "GOURAV SHARMA", class: "XII A", hostel: "Aravali", phone: "6005851908", email: "gouravsharma@gmail.com", img: "", fatherName: "SANJEEV KUMAR SHARMA", motherName: "PINKY SHARMA", address: "W.NO. VILL. BIGWAN P.O. JAKHWAR TESHIL & DISTT. KATHUA PIN. 184014" },
  { admissionNo: "2610", name: "KESHAV SHARMA", class: "XII A", hostel: "Aravali", phone: "9622394351", email: "keshavsharma@gmail.com", img: "", fatherName: "GULSHAN KUMAR", motherName: "SHIVANI SHARMA", address: "VPO. DHANNI BAKHTO (BHORTHAIN) TESHIL & DISTT. KATHUA PIN. 184143" },
  { admissionNo: "2600", name: "NEERAJ KUMAR", class: "XII A", hostel: "Aravali", phone: "7006766723", email: "neerajkumar@gmail.com", img: "", fatherName: "HANSRAJ", motherName: "PINKI DEVI", address: "JANOTA PO SUKRALA BILLAWAR KATHUA 184201" },
  { admissionNo: "2626", name: "VARUN THAKUR", class: "XII A", hostel: "Aravali", phone: "8493016411", email: "varunthakur@gmail.com", img: "", fatherName: "RAJINDER SINGH", motherName: "REVA DEVI", address: "CHUNERA MAHANUPUR KATHUA 184202" },
  { admissionNo: "2592", name: "BALJEET SINGH", class: "XII B", hostel: "Aravali", phone: "9797310808", email: "baljeetsingh@gmail.com", img: "", fatherName: "KAKU RAM", motherName: "GUDDO DEVI", address: "SALLON BASOHLI KATHUA 184201" },
  { admissionNo: "2640", name: "KARUN NAGOTRA", class: "XII B", hostel: "Aravali", phone: "7889526778", email: "karunnagotra@gmail.com", img: "", fatherName: "JAGDEV SINGH", motherName: "ANJU BALA", address: "MAHANPUR KATHUA 184201" },
  { admissionNo: "2665", name: "KASHORE SINGH", class: "XII B", hostel: "Aravali", phone: "9589420782", email: "kashoresingh@gmail.com", img: "", fatherName: "OMKAR CHAND", motherName: "NEELAM DEVI", address: "BILLAWAR KATHUA 184204" },
  { admissionNo: "2663", name: "PARSHANT KALANDRY", class: "XII B", hostel: "Aravali", phone: "9906278090", email: "parshantkalandry@gmail.com", img: "", fatherName: "DARSHAN KUMAR", motherName: "ANJU DEVI", address: "BANI KATHUA 184206" },
  { admissionNo: "2719", name: "MOHD ASHFAQ", class: "XI B", hostel: "Aravali", phone: "7006248376", email: "mohdashfaq@gmail.com", img: "", fatherName: "BIRU DIN", motherName: "KHURSHEDA AKHTER", address: "VILL. NAJOTE, PO. SUKRALA DEVI, TESHIL. MALHAR DISTT. KATHUA PIN. 184204" },
  { admissionNo: "2699", name: "PARUL VERMA", class: "XI A", hostel: "Aravali", phone: "8082056035", email: "parulverma@gmail.com", img: "", fatherName: "NEK RAM", motherName: "BHOLI DEVI", address: "VILL. GHODAL, BLOCK. MAHANPUR DISTT. KATHUA PIN. 184201" },
  { admissionNo: "2798", name: "MUKESH SINGH", class: "X A", hostel: "Aravali", phone: "9622050730", email: "mukeshsingh@gmail.com", img: "", fatherName: "DEALK RAM", motherName: "MEEMO DEVI", address: "WARD NO. 1 NEAR GHSS  BADNOTA, TESHIL. BILLAWAR BADNOTIA  DISTT. KATHUA PIN.184204" },
  { admissionNo: "2702", name: "ARNAV BILLAWRIA", class: "XI A", hostel: "Aravali", phone: "9419245990", email: "arnavbillawria@gmail.com", img: "", fatherName: "AMARJEET SINGH", motherName: "NAMRITA SLATHIA", address: "R/O. BUDHI BLOCK BARNOTI DISTT. KATHUA PIN. 184143" },
  { admissionNo: "2734", name: "RAVI KUMAR", class: "XI B", hostel: "Aravali", phone: "9622359875", email: "ravikumar@gmail.com", img: "", fatherName: "JOGINDER PAUL", motherName: "GOURA DEVI", address: "VPO. GURHA KALIAL TESHIL. RAMKOT DISTT. KAHTUA PIN. 184210" },
  { admissionNo: "2749", name: "SHIVAM KUMAR", class: "XI B", hostel: "Aravali", phone: "7051490461", email: "shivamkumar@gmail.com", img: "", fatherName: "PALVINDER KUMAR", motherName: "CHANCHAL DEVI", address: "VPO. MARHEEN DISTT. KATHUA PIN. 184148" },
  { admissionNo: "2788", name: "NISHANT SHARMA", class: "X A", hostel: "Aravali", phone: "7298197597", email: "nishantsharma@gmail.com", img: "", fatherName: "PAWAN KUMAR", motherName: "KIRNA DEVI", address: "VPO. MAHANPUR , TESHIL. MAHANPUR, DISTT. KATHUA PIN. 184202" },
  { admissionNo: "2784", name: "SOURAV SINGH", class: "X B", hostel: "Aravali", phone: "9682574896", email: "souravsingh@gmail.com", img: "", fatherName: "RAMESH SINGH", motherName: "JYOTI DEVI", address: "VILL. PCAHI, TESHIL. BASOHLI, DISTT. KATHUA PIN. 184201" },
  { admissionNo: "5048", name: "KARAN", class: "XI C", hostel: "Aravali", phone: "7298425209", email: "karan@gmail.com", img: "", fatherName: "SOM RAJ", motherName: "SATYA DEVI", address: "R/O VPO BANI, TEHSIL BANI DISTT. KATHUA (JK)-184206" },
  { admissionNo: "2868", name: "AMARIS", class: "IX A", hostel: "Aravali", phone: "9541390200", email: "amaris@gmail.com", img: "", fatherName: "UDHAYBIR SINGH", motherName: "RAJNEE DEVI", address: "WARD NO 09, VPO & TEHSIL, NAGRI PAROLE, DISTT. KATHUA-184151" },
  { admissionNo: "2828", name: "RIDHAM LONI", class: "X A", hostel: "Aravali", phone: "6005238677", email: "ridhamloni@gmail.com", img: "", fatherName: "RAKESH KUMAR", motherName: "REKHA RANI", address: "VPO. KHANPUR, TESHIL. MARHEEN, DISTT. KATHUA PIN. 184148" },

  // ===================== UDAIGIRI =====================
  { admissionNo: "2898", name: "ACHUTAM VAID", class: "IX A", hostel: "Udaigiri", phone: "7780852296", email: "", img: "", fatherName: "ANIL GUPTA", motherName: "JYOTI GUPTA", address: "VILL. MAHANPUR, TEHSIL MAHANPUR, P/O MAHANPUR, KATHUA,J&K, 184202" },
  { admissionNo: "2962", name: "KARTIK SHARMA", class: "IX A", hostel: "Udaigiri", phone: "9149976306", email: "", img: "", fatherName: "PAWAN KUMAR", motherName: "ASHA RANI", address: "VILL. DHANU PROLE, TEHSIL BILLAWAR, P/O BILLAWAR, KATHUA, J&K, 184204" },
  { admissionNo: "2916", name: "NITESH G RAJ", class: "IX A", hostel: "Udaigiri", phone: "9596832968", email: "", img: "", fatherName: "GANESH RAJ", motherName: "RENU BALA", address: "WARD 7, VILL. CHANGI, TEHSIL MARHEEN, P/O SANJI MORH, KATHUA ,J&K, 184148" },
  { admissionNo: "2819", name: "BISHANT VERMA", class: "X A", hostel: "Udaigiri", phone: "6005400792", email: "", img: "", fatherName: "KARAM CHAND", motherName: "RAJNI DEVI", address: "WARD. NO. 3, NEAR GPS KAGRORE BASOHLI, DISTT. KATHUA PIN. 184201" },
  { admissionNo: "2811", name: "JATIN KARLUPIA", class: "X A", hostel: "Udaigiri", phone: "6006458095", email: "", img: "", fatherName: "RAJ KUMAR", motherName: "RAJNI DEVI", address: "VILL. DURANG, PO. NAGROTA, TESHIL. BASOHLI, DISTT. KATHUA PIN. 184201" },
  { admissionNo: "2646", name: "NISHANT TRARIA", class: "XII B", hostel: "Udaigiri", phone: "7298197597", email: "", img: "", fatherName: "PAWAN KUMAR", motherName: "KIRNA DEVI", address: "VPO. MAHANPUR, TESHIL. MAHANPUR, DISTT. KATHUA PIN. 184202" },
  { admissionNo: "2859", name: "ABHISHEK VERMA", class: "X A", hostel: "Udaigiri", phone: "8849604725", email: "", img: "", fatherName: "SURINDER SINGH", motherName: "SHASHI DEVI", address: "VILL. KASHEER, PO. HUT TESHIL. BASOHLI, DISTT. KATHUA PIN. 184201" },
  { admissionNo: "2775", name: "AVINANDAN", class: "X B", hostel: "Udaigiri", phone: "8803119087", email: "", img: "", fatherName: "LALIT KUMAR", motherName: "SAMBU DEVI", address: "V.P.O. KHAROTE, TESHIL. & DISTT. KATHUA PIN. 184102" },
  { admissionNo: "2794", name: "VARUN BHADWAL", class: "X B", hostel: "Udaigiri", phone: "8082036939", email: "", img: "", fatherName: "SUBASH CHANDER", motherName: "POOJA DEVI", address: "WARD NO. NEAR GMS DADWARA, P.O. BHADDU, TESHIL. BILLAWAR DISTT. KATHUA PIN. 184203" },
  { admissionNo: "2696", name: "LALIT SINGH", class: "XI B", hostel: "Udaigiri", phone: "7051010610", email: "", img: "", fatherName: "NARINDER SINGH", motherName: "SONAM ANDOTRA", address: "VILL. MATANDI BLOCK. KEERIAN GANDYAL. DISTT. KATHUA PIN. 191201" },
  { admissionNo: "2716", name: "DHAMAN BHARADWAJ", class: "XI B", hostel: "Udaigiri", phone: "9797590079", email: "", img: "", fatherName: "DEV RAJ", motherName: "ANITA DEVI", address: "VILL. DURANG BLOCK- MANDLI DISTT. KATHUA PIN. 184203" },
  { admissionNo: "2743", name: "FARMESHWAR MANGOTRA", class: "XI C", hostel: "Udaigiri", phone: "9697580660", email: "", img: "", fatherName: "KHEM RAJ", motherName: "RENU KUMARI", address: "R/O. DHANU PAROLE PO. LAHRI TESHIL. BILLAWAL DISTT. KATHUA PIN. 184203" },
  { admissionNo: "2687", name: "THAKUR ANMOL SINGH", class: "XI A", hostel: "Udaigiri", phone: "9797674106", email: "", img: "", fatherName: "UTTAM CHAND", motherName: "PREMIKA DEVI", address: "R/O SANDROON PO. BHANDAR TESHIL. BANI DISTT. KATHUA PIN. 184206" },
  { admissionNo: "2602", name: "AMAN SINGH", class: "XII A", hostel: "Udaigiri", phone: "9906063705", email: "", img: "", fatherName: "LEKH RAJ", motherName: "NEELAM DEVI", address: "BHAKOGA DULLANGAL BANI KATHUA 184206" },
  { admissionNo: "2652", name: "SAHIL KUMAR", class: "XII A", hostel: "Udaigiri", phone: "9622016117", email: "", img: "", fatherName: "SANJAY KUMAR", motherName: "REENA DEVI", address: "SURJAN  P/O  CHALOGE TESHIL. BANI. DISTT. KATHUA PIN. 184206" },
  { admissionNo: "2613", name: "SIDDHANT SINGH JAMWAL", class: "XII A", hostel: "Udaigiri", phone: "9149768371", email: "", img: "", fatherName: "JAGBIR SINGH", motherName: "JYOTI DEVI", address: "PLAKH BASOHLI KATHUA 184201" },
  { admissionNo: "2863", name: "VANSH KANETHIA", class: "XII A", hostel: "Udaigiri", phone: "9419619080", email: "", img: "", fatherName: "PRITAM DASS", motherName: "PUNAM PAMMI", address: "R/O. CHACK GADA DHAR, PO. LACHIPUR TESHIL & DISTT. KATHUA PIN. 184104" },
  { admissionNo: "2630", name: "VISHAV JEET", class: "XII A", hostel: "Udaigiri", phone: "9596906343", email: "", img: "", fatherName: "PIAYARAY LAL", motherName: "SHAKUNTLA DEVI", address: "MALHAR KATHUA 184204" },
  { admissionNo: "2635", name: "SUMIT SINGH PATHANIA", class: "XII A", hostel: "Udaigiri", phone: "8082624550", email: "", img: "", fatherName: "SUKHDEV SINGH", motherName: "JYOTI DEVI", address: "BILLAWAR KATHUA 184204" },
  { admissionNo: "2634", name: "BHAVISHAY SANGRAL", class: "XII C", hostel: "Udaigiri", phone: "9596614282", email: "", img: "", fatherName: "HANS RAJ", motherName: "ANJU BALA", address: "NAGRI KATHUA 184143" },
  { admissionNo: "2672", name: "DEWAKER BHARDVAJ", class: "XII C", hostel: "Udaigiri", phone: "9906241079", email: "", img: "", fatherName: "RAJINDER KUMAR", motherName: "MADHU BALA", address: "HIRANAGAR KATHUA184142" },
  { admissionNo: "2779", name: "ADARSH KANTYAL", class: "X A", hostel: "Udaigiri", phone: "9149962326", email: "", img: "", fatherName: "KULDEEP KUMAR", motherName: "NEELAM", address: "V.P.O. MALHAR TESHIL. LOHAI MALHAR DISTT. KATHUA PIN 184204" },
  { admissionNo: "2851", name: "DIVANSH CHOUDHARY", class: "X A", hostel: "Udaigiri", phone: "8082085200", email: "", img: "", fatherName: "SANJEEV SINGH", motherName: "REENA DEVI", address: "VILL. THATHI, PO. SESWAN TESHIL. MARHEEN, DISTT. KATHUA PIN. 184144" },
  { admissionNo: "2802", name: "SAMARTH SLATHIA", class: "X B", hostel: "Udaigiri", phone: "6005129328", email: "", img: "", fatherName: "SUDISH KUMAR VERMA", motherName: "POOJA RAJPUT", address: "W.NO. E2-409 EMPLOYEE COLONY CHENAB TESHIL. MILLS DISTT. KATHUA PIN. 6005129328" },
  { admissionNo: "2718", name: "BARUN KALSOTRA", class: "XI A", hostel: "Udaigiri", phone: "9469009760", email: "", img: "", fatherName: "SURESH KALSOTRA", motherName: "ASHA RANI", address: "VILL. DHALLI PO. DAYALA CHACK TESHIL. HIRANAGAR DISTT. KATHUA PIN. 184144" },
  { admissionNo: "2729", name: "LOVISH THAKUR", class: "XI A", hostel: "Udaigiri", phone: "9906313422", email: "", img: "", fatherName: "BHUSHAN SINGH", motherName: "MANISHA DEVI", address: "VILL. MALTI BLOCK- BILLAWAR DISTT. KATHUA PIN. 184204" },
  { admissionNo: "2732", name: "KOUSHAL KOTWAL", class: "XI A", hostel: "Udaigiri", phone: "6005589326", email: "", img: "", fatherName: "ROMESH KUMAR", motherName: "REETA DEVI", address: "VILL. MACHHEDI  BLOCK-LOHAI MALHAR DISTT. KATHUA PIN. 184204" },
  { admissionNo: "2742", name: "HIMANG BHARDWAJ", class: "XI A", hostel: "Udaigiri", phone: "9906266412", email: "", img: "", fatherName: "JANAK RAJ", motherName: "VEENA DEVI", address: "VPO. CHADWAL BLOCK-MARHEEN DISTT. KATHUA PIN. 184144" },
  { admissionNo: "2698", name: "SAHIL FERINGATA", class: "XI A", hostel: "Udaigiri", phone: "9906278938", email: "", img: "", fatherName: "SURINDER SINGH", motherName: "DIMPLE DEVI", address: "VPO. BANI TESHIL. BANI DISTT. KATHUA PIN. 184206" },
  { admissionNo: "2829", name: "DANISH MAJOTRA", class: "X B", hostel: "Udaigiri", phone: "9149839352", email: "", img: "", fatherName: "CHAMELO RAM", motherName: "POOJA DEVI", address: "VILL. HARDO MUTHI, P.O. AMALA, TESHIL. MARHEEN, DISTT. KATHUA PIN. 184144" },
  { admissionNo: "2799", name: "VANSH", class: "X A", hostel: "Udaigiri", phone: "7006331816", email: "", img: "", fatherName: "ROOP LAL", motherName: "SAROJ KUMARI", address: "VILL. JAGATPUR (MARHEEN) TESHIL. MARHEEN DISTT. KATHUA PIN. 184148" },
  { admissionNo: "2838", name: "SAKSHAM VERMA", class: "X A", hostel: "Udaigiri", phone: "7006062997", email: "", img: "", fatherName: "ARUN PARSHAD", motherName: "SUREKHA RANI", address: "VILL. NIHALPUR, PO. PALLI MORH, BARNOTI, DISTT. KATHUA PIN. 184143" },
  { admissionNo: "2875", name: "SAKSHAM VERMA", class: "X A", hostel: "Udaigiri", phone: "9149801781", email: "", img: "", fatherName: "BABU RAM", motherName: "ASHA RANI", address: "WARD NO. 4 R/O GURA KALYAL, TESHL. BILLAWAR DISTT. KATHUA PIN. 184203" },
  { admissionNo: "2711", name: "AKSHIT VERMA", class: "XI B", hostel: "Udaigiri", phone: "9858018288", email: "", img: "", fatherName: "RAMANAND", motherName: "SEEMA VERMA", address: "R/O-PARNALLA TESHIL. BILLAWAR, DISTT. KATHUA PIN. 184203" },
  { admissionNo: "5056", name: "NATIK GOUR", class: "XI A", hostel: "Udaigiri", phone: "9622302476", email: "", img: "", fatherName: "YOGINDER PAUL", motherName: "ASHA DEVI", address: "R/O HOTTAR,  TEHSIL BILLAWAR, DISTT. KATHUA (JK)-184203" },
  { admissionNo: "2608", name: "DIKSHIT BHARAT", class: "XII A", hostel: "Udaigiri", phone: "9596686360", email: "", img: "", fatherName: "TILAK RAJ", motherName: "RITA DEVI", address: "NANGAL KATHUA 184143" },
  { admissionNo: "2795", name: "TANISH MALGOTRA", class: "X B", hostel: "Udaigiri", phone: "8082036939", email: "", img: "", fatherName: "SUBASH CHANDER", motherName: "POOJA DEVI", address: "WARD NO. NEAR GMS DADWARA, P.O. BHADDU, TESHIL. BILLAWAR DISTT. KATHUA PIN. 184203" },
  { admissionNo: "3093", name: "AADYA SINGH TANDON", class: "VII A", hostel: "Udaigiri", phone: "9906330971", email: "", img: "", fatherName: "ARUN SINGH", motherName: "REKEHA DEVI", address: "VILL. GATTI, BLOCK & TEHSIL-BANI DISTT. KATHUA PIN - 184206" },
  { admissionNo: "4009", name: "LAKASH SHARMA", class: "VII A", hostel: "Udaigiri", phone: "7051074375", email: "", img: "", fatherName: "MOHINDER KUMAR", motherName: "GORKHI DEVI", address: "R/O VPO. DHAR DUGNOO BLOCK BAGGAN TEHSIL. BILLAWAR DISTT. KATHUA PIN - 184204" },
  { admissionNo: "3068", name: "SPARSH SULDRU", class: "VII A", hostel: "Udaigiri", phone: "9906278050", email: "", img: "", fatherName: "LEKH RAJ", motherName: "KANTA DEVI", address: "R/O ASSO P/O BANI TEHSIL & BLOCK BANI DISTT. KATHUA PIN - 184206" },
  { admissionNo: "4006", name: "ARHAAN SAMEEN", class: "VII B", hostel: "Udaigiri", phone: "9149494523", email: "", img: "", fatherName: "RIAZ BALI", motherName: "ANJANA ANJUM", address: "VILL. PLAKH, BLOCK & TEHSIL BASOHLI, DISTT. KATHUA PIN - 184201" },
  { admissionNo: "4019", name: "KARTIK", class: "VII B", hostel: "Udaigiri", phone: "9149680160", email: "", img: "", fatherName: "BALWANT RAJ", motherName: "VEENA DEVI", address: "VILL. DANJASDHAR AIP DHER TEHSIL & BLOCK BILLAWAR DISTT. KATHUA PIN - 184204" },
  { admissionNo: "3081", name: "RANSH KATAL", class: "VII B", hostel: "Udaigiri", phone: "7006208148", email: "", img: "", fatherName: "MOHINDER SINGH", motherName: "SUNITA DEVI", address: "VILL. POONDA BLOCK & TEHSIL MAHANPUR DISTT. KATHUA PIN - 184202" },
  { admissionNo: "4010", name: "SUKANT SINGH", class: "VII B", hostel: "Udaigiri", phone: "9596702111", email: "", img: "", fatherName: "BAGWANT SINGH", motherName: "MAMTA DEVI", address: "VILL. HORE BLOCK MARHEEN TEHSIL HIRANAGAR DISTT. KATHUA PIN - 184148" },
  { admissionNo: "2987", name: "ANGREZ SINGH", class: "VIII A", hostel: "Udaigiri", phone: "9622222365", email: "", img: "", fatherName: "HANSRAJ", motherName: "SUSHMA DEVI", address: "R/O LOWANG TEHSIL BANI BLOCK BANI DISTT. KATHUA PIN - 184206" },
  { admissionNo: "2998", name: "ABHIMANYU SHARMA", class: "VIII B", hostel: "Udaigiri", phone: "7006171184", email: "", img: "", fatherName: "TARA CHAND", motherName: "KIRNA DEVI", address: "MALHAR DISTT. KATHUA" },
  { admissionNo: "3019", name: "CHITRESH PANDEER", class: "VIII B", hostel: "Udaigiri", phone: "7889329550", email: "", img: "", fatherName: "SHASHI PAUL", motherName: "POOJA KUMARI", address: "VILL NONAL KARSOH KATHUA" },
  { admissionNo: "2988", name: "DAKSH BHARDWAJ", class: "VIII B", hostel: "Udaigiri", phone: "9906063015", email: "", img: "", fatherName: "DEEP RAJ", motherName: "NISHA", address: "KANTHAL BANI KATHUA" },
  { admissionNo: "2979", name: "HARISH KUMAR", class: "VIII B", hostel: "Udaigiri", phone: "9906638422", email: "", img: "", fatherName: "AJIT PAL", motherName: "USHA RANI", address: "VILL NAGROTA BUDHI KATHUA" },
  { admissionNo: "3008", name: "MAYANK RAJPUT", class: "VIII B", hostel: "Udaigiri", phone: "7889402285", email: "", img: "", fatherName: "BALBIR SINGH", motherName: "MONIKA MINHAS", address: "TRIDWAN KATHUA" },
  { admissionNo: "2990", name: "RUDERAKSH PADHETU", class: "VIII B", hostel: "Udaigiri", phone: "990627911", email: "", img: "", fatherName: "SHANTI PARSHAD", motherName: "VEENA DEVI", address: "KANTHAL BANI KATHUA" },
  { admissionNo: "3017", name: "SAKSHAM VERMA", class: "VIII B", hostel: "Udaigiri", phone: "9697633005", email: "", img: "", fatherName: "DEWAN CHAND", motherName: "VEENA DEVI", address: "DAN JASDHAR LAKHRI RAMKOT KATHUA" },
  { admissionNo: "4037", name: "DISHANT THAKUR", class: "VII A", hostel: "Udaigiri", phone: "9906357744", email: "", img: "", fatherName: "PAPU RAM", motherName: "SUNITA RANI", address: "VILL & TEHSIL & BLOCK LOHAI MAISAR DISTT. KATHUA PIN - 184204" },
  { admissionNo: "4053", name: "LAKSHDEEP SINGH", class: "VII A", hostel: "Udaigiri", phone: "6005290594", email: "", img: "", fatherName: "PURAN SINGH", motherName: "SHALI DEVI", address: "NRAR GOVT. MIDDLE SCHOOL PANDARI DISTT. KATHUA PIN - 184151" },
  { admissionNo: "4046", name: "VIHAAN THAKUR", class: "VII B", hostel: "Udaigiri", phone: "8282279501", email: "", img: "", fatherName: "DEVINDER SINGH", motherName: "ANITA DEVI", address: "W.NO. NHAR SHIV MANDIR BANI DISTT. KATHUA PIN - 184152" },
  { admissionNo: "2889", name: "SHUBHAM SULDRU", class: "IX B", hostel: "Udaigiri", phone: "8082299767", email: "", img: "", fatherName: "MADAN LAL", motherName: "NIRMALA DEVI", address: "VILL. ASSO, TEHSIL BANI, P/O BANI, KATHUA, J&K, 184206" },
  { admissionNo: "2911", name: "AANUJ", class: "IX B", hostel: "Udaigiri", phone: "9858897913", email: "", img: "", fatherName: "NARENDER KUMAR", motherName: "SONIKA SHARMA", address: "VILL. PARANALLA, TEHSIL BILLAWAR, P/O BILLAWAR, KATHUA, J&K, 184203" },
  { admissionNo: "2902", name: "ANSH CHOUDHARY", class: "IX B", hostel: "Udaigiri", phone: "8491925900", email: "", img: "", fatherName: "PAWAN KUMAR", motherName: "NEELU DEVI", address: "VILL. CHAPPAKI, TEHSIL HIRANAGAR, P/O CHAPPAKI, KATHUA, J&K, 184144" },
  { admissionNo: "2925", name: "RITASH", class: "IX B", hostel: "Udaigiri", phone: "9682567173", email: "", img: "", fatherName: "CHAMAN LAL", motherName: "ANU BALA", address: "VILL. LAKHARI, TEHSIL RAMKOT, P/O BILLAWAR, KATHUA, J&K, 184204" },
  { admissionNo: "2908", name: "VARUN JANGRAL", class: "IX B", hostel: "Udaigiri", phone: "8493927148", email: "", img: "", fatherName: "SURESH KUMAR", motherName: "JYOTI DEVI", address: "WARD 7, VILL. NAGROTA, TEHSIL BARNOTI, P/O BUDHI, KATHUA, J&K, 184143" },
  { admissionNo: "2951", name: "RUDHAR RAJPUT", class: "IX A", hostel: "Udaigiri", phone: "9419121673", email: "", img: "", fatherName: "NARINDER SINGH", motherName: "VANDANA RANI", address: "VILLAGE BAKTHPUR TEHSIL BILLAWAR DISTT. KATHUA" },
  { admissionNo: "4036", name: "NAKESH SINGH THAKUR", class: "VII A", hostel: "Udaigiri", phone: "9149813904", email: "", img: "", fatherName: "RAKESH KUMAR", motherName: "SHASHI DEVI", address: "VPO. DUGGAIN TEHSIL LOHAI MALHAR BLOCK-DUGGAIN DISTT. KATHUA PIN - 184203" },
  { admissionNo: "3015", name: "GOKUL VERMA", class: "VIII B", hostel: "Udaigiri", phone: "9149549348", email: "", img: "", fatherName: "HUKAM CHAND", motherName: "USHA DEVI", address: "VILL GURA KALYAL GURA RAMKOTE KATHUA" },
  { admissionNo: "5010", name: "AKASH", class: "VI A", hostel: "Udaigiri", phone: "9697564537", email: "", img: "", fatherName: "DHARM CHAND", motherName: "VEENA DEVI", address: "VILL MALHAR TEHSIL LOHAI MALHAR DISTT. KATHUA-184204" },
  { admissionNo: "4079", name: "ANTRIKSH", class: "VI B", hostel: "Udaigiri", phone: "7006059644", email: "", img: "", fatherName: "SURINDER SINGH", motherName: "REENA RANI", address: "VILL BADNOTA TEHSIL LOHAI MALHAR DISTT. KATHUA-184204" },
  { admissionNo: "4080", name: "ANUESHWAR SINGH", class: "VI A", hostel: "Udaigiri", phone: "6005139897", email: "", img: "", fatherName: "NARINDER SINGH", motherName: "SUNITA DEVI", address: "VILL MALAD TEHSIL LOHAI MALHAR DISTT. KATHUA-184204" },
  { admissionNo: "5011", name: "KARTIK THAKUR", class: "VI A", hostel: "Udaigiri", phone: "9149428023", email: "", img: "", fatherName: "RAVINDER SINGH", motherName: "REETA DEVI", address: "VILL DHAR JANKHER TEHSIL BASOHLI DISTT. KATHUA-184201" },
  { admissionNo: "5026", name: "ATULYA PANDEY", class: "VI B", hostel: "Udaigiri", phone: "9419273011", email: "", img: "", fatherName: "SANJEET KUMAR", motherName: "BANDNA DEVI", address: "VILL GADYAL TEHSIL HIRANAGAR DISTT. KATHUA-184148" },
  { admissionNo: "5069", name: "PARAV BHAGAT", class: "VI A", hostel: "Udaigiri", phone: "9596924147", email: "", img: "", fatherName: "NAVEEN KUMAR", motherName: "MAMTA DEVI", address: "VILL PHALLAPUR TEHSIL HIRANAGAR DISTT. KATHUA-184142" },
  { admissionNo: "4086", name: "PARTH SALGOTRA", class: "VI B", hostel: "Udaigiri", phone: "9906385409", email: "", img: "", fatherName: "SANJAY KUMAR", motherName: "SUMAN BALA", address: "WARD NO 08, PLAHAI, BASOHLI DISTT. KATHUA-184201" },
  { admissionNo: "5033", name: "NAMAN THAKUR", class: "VI B", hostel: "Udaigiri", phone: "9858221042", email: "", img: "", fatherName: "LEKH RAJ", motherName: "SUSHMA DEVI", address: "VILL ATHIALTA TEHSIL MAHANPUR DISTT. KATHUA-184202" },
  { admissionNo: "5021", name: "SANDEEP KUMAR", class: "VI B", hostel: "Udaigiri", phone: "9697210282", email: "", img: "", fatherName: "CHAIN KUMAR", motherName: "NEELMA DEVI", address: "VILL NAGALI, TEHSIL BASOHLI DISTT. KATHUA-184201" },
  { admissionNo: "9999", name: "SATYOM VAID", class: "VI B", hostel: "Udaigiri", phone: "9858273338", email: "", img: "", fatherName: "ABINASH VAID", motherName: "SAPMA", address: "WARD NO 05 NEAR SHIV TEMPLE MAHANPUR DISTT. KATHUA-184202" },


  // ===================== SHIVALIK =====================
  { admissionNo: "2774", name: "AKSHAT DOGRA", class: "X A", hostel: "Shivalik", phone: "9797674689", email: "", img: "", fatherName: "ANGREZ CHAND", motherName: "SUNITA DEVI", address: "VILL. MANGU CHACR P.O. RAJPRA, DISTT. SAMBA PIN - 184145" },
  { admissionNo: "2809", name: "JATIN KUMAR", class: "X A", hostel: "Shivalik", phone: "6006458095", email: "", img: "", fatherName: "RAJ KUMAR", motherName: "RAJNI DEVI", address: "VILL. DURANG, PO. NAGROTA, TESHIL. BASOHLI, DISTT. KATHUA PIN. 184201" },
  { admissionNo: "2852", name: "RAGHAV TATYAL", class: "X A", hostel: "Shivalik", phone: "7006569080", email: "", img: "", fatherName: "DES RAJ", motherName: "REKHA DEVI", address: "VILL. GARNARI, PO. AMALA TESHIL. MARHEEN DISTT. KATHUA PIN. 184144" },
  { admissionNo: "7777", name: "VARUN VERMA", class: "X A", hostel: "Shivalik", phone: "9149537340", email: "", img: "", fatherName: "HARBANS LAL", motherName: "RITA DEVI", address: "VILL. DURANG, TESHIL. BILLAWAR, DISTT. KATHUA PIN. 184203" },
  { admissionNo: "2816", name: "ASTATIV SHARMA", class: "X B", hostel: "Shivalik", phone: "6005956446", email: "", img: "", fatherName: "PAWAN KUMAR SHARMA", motherName: "BANDANA RANI", address: "STREET  KRISHNA MANDIR BANI, TESHIL. BANI, DISTT. KATHUA PIN. 184206" },
  { admissionNo: "2812", name: "KULWANT KUMAR", class: "X B", hostel: "Shivalik", phone: "6005295884", email: "", img: "", fatherName: "CHHALO RAM", motherName: "KASERI DEVI", address: "VILL. DULLLANGAL, BLOCK DUGAN, THE. BANI,KATHUA -184206" },
  { admissionNo: "2722", name: "ANISH SIOTRA", class: "XI A", hostel: "Shivalik", phone: "9149621018", email: "", img: "", fatherName: "OMKAR CHAND", motherName: "KAMLESH KUMARI", address: "VILL. PRETA PO. NAGROTA TESHIL. BASOHLI, DISTT. KATHUA PIN. 184201" },
  { admissionNo: "2715", name: "HARISH ZARGER", class: "XI A", hostel: "Shivalik", phone: "9906047685", email: "", img: "", fatherName: "VARINDER KUMAR ZARGER", motherName: "BRIKMA DEVI", address: "VPO. BANI W.NO. 1 TESHIL. BANI, DISTT. KATHUA PIN. 184206" },
  { admissionNo: "2700", name: "RAJVEER SINGH", class: "XI C", hostel: "Shivalik", phone: "7051313176", email: "", img: "", fatherName: "MANOHAR SINGH", motherName: "HARMEET KAUR", address: "VILL. RAJBAGH  TESHIL. MARHEEN DISTT. KATHUA PIN. 184144" },
  { admissionNo: "2688", name: "RATISH KUMAR", class: "XI B", hostel: "Shivalik", phone: "9906118099", email: "", img: "", fatherName: "GOVIND LAL", motherName: "SATYA DEVI", address: "R/O. W.NO. 02 NEAR SHIV MANDIR, BANI DISTT. KATHUA PIN. 184206" },
  { admissionNo: "2636", name: "ADARSH SALGOTRA", class: "XII A", hostel: "Shivalik", phone: "9149591207", email: "", img: "", fatherName: "SHAMSHER CHAND VERMA", motherName: "NEERASHA DEVI", address: "PANJOOTH DINGA AMB KATHUA 184204" },
  { admissionNo: "2612", name: "DHEERAJ RAJPUT", class: "XII A", hostel: "Shivalik", phone: "9149632053", email: "", img: "", fatherName: "SHIV SINGH", motherName: "VEENA DEVI", address: "BATARE KATHUA 184201" },
  { admissionNo: "2623", name: "KRISH KUMAR", class: "XII A", hostel: "Shivalik", phone: "7889469040", email: "", img: "", fatherName: "SANJAY KUMAR", motherName: "SWARNA DEVI", address: "KRSIHAN TEMPLE NAGRI KATHUA 184204" },
  { admissionNo: "574", name: "MUSHTAQ AHMED", class: "XII B", hostel: "Shivalik", phone: "6006377169", email: "", img: "", fatherName: "MUSHOOQ ALI", motherName: "PARVEEN AKHTER", address: "JAMMU 180001" },
  { admissionNo: "2659", name: "PARSHOTUM KUMAR", class: "XII B", hostel: "Shivalik", phone: "9797462651", email: "", img: "", fatherName: "INDERJEET", motherName: "AARTI DEVI", address: "BANI KATHUA 184206" },
  { admissionNo: "599", name: "TARIQ NASEER", class: "XII B", hostel: "Shivalik", phone: "9596213652", email: "", img: "", fatherName: "MOHD NASEER", motherName: "RAKAJA BI", address: "SAINK COLONY JAMMU 180001" },
  { admissionNo: "2661", name: "ANKIT KUMAR", class: "XII B", hostel: "Shivalik", phone: "9086758853", email: "", img: "", fatherName: "RAM DULAR", motherName: "BINDU DEVI", address: "CTM COLONY KATHA 184102" },
  { admissionNo: "2629", name: "DALJEET SINGH", class: "XII B", hostel: "Shivalik", phone: "9797542236", email: "", img: "", fatherName: "DARSHAN SINGH", motherName: "SHESHNA DEVI", address: "BADNOTA MALHAR KATHUA 184204" },
  { admissionNo: "2649", name: "RAJESH KUMAR", class: "XII C", hostel: "Shivalik", phone: "9622337550", email: "", img: "", fatherName: "JOGINDER PAUL", motherName: "GAYTRI DEVI", address: "MARHEEN KATHUA 184151" },
  { admissionNo: "2643", name: "SUMEET KUMAR", class: "XII C", hostel: "Shivalik", phone: "6005015242", email: "", img: "", fatherName: "JEEWAN LAL", motherName: "JYOTI DEVI", address: "MAHANPUR KATHUA 184201" },
  { admissionNo: "2728", name: "ANUSH THAKUR", class: "XI A", hostel: "Shivalik", phone: "9622129976", email: "", img: "", fatherName: "KARNAIL SINGH", motherName: "SARESHO DEVI", address: "VILL. MARHOON TESHIL. BILLAWAR DISTT. KATHUA PIN. 184204" },
  { admissionNo: "2750", name: "ARMAAN VERMA", class: "XI B", hostel: "Shivalik", phone: "9419215975", email: "", img: "", fatherName: "VRINDER KUMAR", motherName: "USHA RANI", address: "VILL. LAKHRI TESHIL. RAMKOT, DISTT. KATHUA PIN. 184210" },
  { admissionNo: "2737", name: "VANSH RAJ", class: "XI A", hostel: "Shivalik", phone: "9797628252", email: "", img: "", fatherName: "SAT PAUL", motherName: "GARO DEVI", address: "VILL. MEARTH BLOCK-BARNOTI DISTT. KATHUA PIN. 184143" },
  { admissionNo: "2757", name: "GOURAV SHARMA", class: "XI A", hostel: "Shivalik", phone: "2866", email: "", img: "", fatherName: "RAMRAKHA", motherName: "SULEKHA DEVI", address: "W.NO. 5 VILL. BIGWAN P.O. JAKHWAR TESHIL & DISTT. KATHUA PIN. 184104" },
  { admissionNo: "2792", name: "SAKSHAM KATAL", class: "X B", hostel: "Shivalik", phone: "9149710375", email: "", img: "", fatherName: "MUKESH KUMAR", motherName: "VEENA DEVI", address: "WARD NO. 5, NEAR SHIV TEMPLE, VILL. THANA, P.O. PLASSI, TESHIL. BASOHLI DISTT. KATHUA PIN.184201" },
  { admissionNo: "2740", name: "RITIK KAJOTRA", class: "XI A", hostel: "Shivalik", phone: "6005509374", email: "", img: "", fatherName: "KISHOR KUMAR", motherName: "KRISHMA DEVI", address: "R/O GOPALA CHACK BLOCK MARHEEN, DISTT. KATHUA PIN. 184148" },
  { admissionNo: "5052", name: "SATYAM DOGRA", class: "XI A", hostel: "Shivalik", phone: "9419115125", email: "", img: "", fatherName: "AMRISH DOGRA", motherName: "MONU DEVI", address: "R/O VILL DODLA, PO BHOOND, TEHSIL BASOHLI, DISTT. KATHUA JK-184201" },
  { admissionNo: "5057", name: "SURJEET SINGH", class: "XI A", hostel: "Shivalik", phone: "8005810590", email: "", img: "", fatherName: "GUDU RAM", motherName: "NEELAMA DEVI", address: "R/O VILL HUTT MASHKA, PO HUTT, TEHSIL BASOHLI, DISTT. KATHUA JK-184201" },
  { admissionNo: "5055", name: "HITESH SINGH", class: "XI A", hostel: "Shivalik", phone: "7006798696", email: "", img: "", fatherName: "RAJESH SINGH", motherName: "ANJU RANI", address: "R/O VPO DHAR MAHANPUR, TEHSIL MAHANPUR, KATHUA-184201" },
  { admissionNo: "2599", name: "REETIK THAKUR", class: "XII A", hostel: "Shivalik", phone: "9622294245", email: "", img: "", fatherName: "BISHAN DASS", motherName: "SUSHMA DEVI", address: "VILL MALAD MARHON KATHUA 184204" },
  { admissionNo: "2607", name: "ADITYA SHARMA", class: "XII A", hostel: "Shivalik", phone: "9419219297", email: "", img: "", fatherName: "RAVI KUMAR", motherName: "TARO DEVI", address: "AMALA MARHEN KATHUA 184144" },

  // ===================== NILGIRI =====================
  { admissionNo: "3071", name: "MANIT BEADEAU", class: "VII A", hostel: "Nilgiri", phone: "9906367030", email: "", img: "", fatherName: "RAJINDER PARSHAD", motherName: "REKHA DEVI", address: "VILL. LALOG BARI, BLOCK DOGGAN TESHIL. BANI DISTT. KATHUA PIN - 184206" },
  { admissionNo: "4041", name: "MANJEET SINGH", class: "VII A", hostel: "Nilgiri", phone: "8492952857", email: "", img: "", fatherName: "KULDEEP KUMAR", motherName: "MANISHA DEVI", address: "VILL. SAIDPUR P/O & TESHIL. NAGRI PARALE DISTT. KATHUA PIN - 184151" },
  { admissionNo: "3095", name: "RITIK KUMAR", class: "VII A", hostel: "Nilgiri", phone: "9797503537", email: "", img: "", fatherName: "NARESH KUMAR", motherName: "SHIVO DEVI", address: "VILL BARI BLOCK DUGGAN TESHIL. BANI  DISTT. KATHUA PIN - 184206" },
  { admissionNo: "3099", name: "SAKSHAM ANGURAL", class: "VII A", hostel: "Nilgiri", phone: "9596651033", email: "", img: "", fatherName: "SARWAN KUMAR", motherName: "RANI DEVI", address: "VILL RATHUA P.O. MARHEEN TESHIL. HIRANAGAR, DISTT. KATHUA PIN - 184148" },
  { admissionNo: "3090", name: "ABHAY JARNGAL", class: "VII B", hostel: "Nilgiri", phone: "9797643094", email: "", img: "", fatherName: "AJAY KUMAR", motherName: "REENA", address: "VILL. CHACK SHIBBA, BLOCK & TESHIL. MARHEEN, DISTT. KATJUA PIN - 184148" },
  { admissionNo: "4011", name: "ARYAN SHARMA", class: "VII B", hostel: "Nilgiri", phone: "9797571277", email: "", img: "", fatherName: "SURESH SHARMA", motherName: "ROOPA RANI", address: "VPO. DAYALH CHACK HIRA NAGAR, DISTT. KATHUA PIN - 184144" },
  { admissionNo: "3033", name: "MAYANK MARAL", class: "VIII A", hostel: "Nilgiri", phone: "7006442106", email: "", img: "", fatherName: "KAMAL KISHORE", motherName: "SUNITA DEVI", address: "VILL BHANIYA PO FUMA MUNDIAN HIRANAGAR KATHUA" },
  { admissionNo: "2972", name: "NIKHIL PRALIYA", class: "VIII A", hostel: "Nilgiri", phone: "9622122274", email: "", img: "", fatherName: "SURINDER PAUL", motherName: "KAJAL DEVI", address: "VILL GADYAL MARHEEN HIRANAGAR KATHUA" },
  { admissionNo: "2976", name: "SAHIL KUMAR", class: "VIII A", hostel: "Nilgiri", phone: "9149432086", email: "", img: "", fatherName: "YASHPAUL", motherName: "VEENA DEVI", address: "VILL PLAHI TEHSIL BASOHLI DIST KATHUA" },
  { admissionNo: "3028", name: "ANISH KUMAR", class: "VIII B", hostel: "Nilgiri", phone: "8899905946", email: "", img: "", fatherName: "HARI KISHORE RAY", motherName: "MADHURI", address: "RISHI NAGAR CHACKRAM SINGH KATHUA" },
  { admissionNo: "3056", name: "DIVYANSHU HADOKER", class: "VIII B", hostel: "Nilgiri", phone: "9906167110", email: "", img: "", fatherName: "NARINDER KUMAR", motherName: "SURISHTA DEVI", address: "KANTHAL BANI KATHUA" },
  { admissionNo: "2971", name: "PARMJEET", class: "VIII B", hostel: "Nilgiri", phone: "7051262168", email: "", img: "", fatherName: "HANS RAJ", motherName: "ANU DEVI", address: "VILL MAGLOOR DINGAAMB KATHUA" },
  { admissionNo: "3029", name: "SHAURABH KUMAR", class: "VIII B", hostel: "Nilgiri", phone: "6005420815", email: "", img: "", fatherName: "SHIV KISHOR", motherName: "SANGITA DEVI", address: "R BLOCK RNO. 67 LABOUR COLAVY CTM KATHUA" },
  { admissionNo: "3030", name: "SITANSHU BADGAL", class: "VIII B", hostel: "Nilgiri", phone: "9469648146", email: "", img: "", fatherName: "SWARN LAL", motherName: "REKHA DEVI", address: "CHACK SHIBA MARHEEN KATHUA" },
  { admissionNo: "3063", name: "HARISH VERMA", class: "VII A", hostel: "Nilgiri", phone: "6006293034", email: "", img: "", fatherName: "YOG RAJ", motherName: "REVA DEVI", address: "MILKI RAM, WARD NO 2 VILL. GHODAL P/O SANANGHAT TESHIL. BASOHLI DISTT. KATHUA PIN - 184201" },
  { admissionNo: "3065", name: "AKSHIT VERMA", class: "VII B", hostel: "Nilgiri", phone: "8899350069", email: "", img: "", fatherName: "RAJINDER PAUL", motherName: "SUNITA DEVI", address: "VILL. SANJIMORE P.O. SANJIMORE , TESHIL. MARHEEN, DISTT. KATHUA PIN - 184148" },
  { admissionNo: "3049", name: "VISHAV PARTAP SINGH", class: "VIII A", hostel: "Nilgiri", phone: "7006892702", email: "", img: "", fatherName: "RAJINDER SINGH", motherName: "RIMU", address: "RO CHHAN KHATRIAH PO KOOLAH HIRANAGAR KATHUA" },
  { admissionNo: "4049", name: "GIRISH SHARMA", class: "VII A", hostel: "Nilgiri", phone: "9149846323", email: "", img: "", fatherName: "DEVINDER SHARMA", motherName: "POONAM SHARMA", address: "VILL. MAHANPUR TESHIL. MANHAPUR DISTT. KATHUA PIN - 184202" },
  { admissionNo: "3045", name: "KUSHAL SINGH", class: "VIII A", hostel: "Nilgiri", phone: "7006922892", email: "", img: "", fatherName: "ASHOK SINGH", motherName: "SUMAN DEVI", address: "VILL TANDYARI TEHSIL MARHEEN DISTT KATHUA" },
  { admissionNo: "3066", name: "BHARAT SARMAL", class: "VII B", hostel: "Nilgiri", phone: "8082645669", email: "", img: "", fatherName: "SWRAN DASS", motherName: "PAWANA DEVI", address: "VILL. LAKHNOTE BLOCK & TESHIL. NAGRI PAROLE, DISTT. KATHUA PIN - 184157" },
  { admissionNo: "2934", name: "ABNISH LALHAL", class: "", hostel: "Nilgiri", phone: "9797535860", email: "", img: "", fatherName: "BISHAN LAL", motherName: "PUSHPA DEVI", address: "VILL. KANTHAL, TEHSIL BANI, P/O BANI, KATHUA ,J&K, 184206" },
  { admissionNo: "2896", name: "ARNAV CHAMBYAL", class: "", hostel: "Nilgiri", phone: "7006362248", email: "", img: "", fatherName: "HARI SINGH", motherName: "REENA RANI", address: "WARD 6, VILL. MAHA LAKHANPUR, TEHSIL KATHUA, P/O LAKHANPUR, KATHUA, J&K, 184152" },
  { admissionNo: "2983", name: "AYAAN SALARIA", class: "", hostel: "Nilgiri", phone: "9797550732", email: "", img: "", fatherName: "MUZAFER HUSSIAN", motherName: "SHABANA YASMEEN", address: "WARD 1, VILL. BASOHLI, TEHSIL BASOHLI, P/O BASOHLI, KATHUA, J&K, 184201" },
  { admissionNo: "2918", name: "VISHAL SAMOTRA", class: "", hostel: "Nilgiri", phone: "6005754360", email: "", img: "", fatherName: "PAWAN KUMAR", motherName: "PREETI", address: "VILL. CHACK SAJJAN, TEHSIL KATHUA, P/O GOVINDSAR, KATHUA, J&K, 184102" },
  { admissionNo: "8888", name: "RITIK KAJOTRA", class: "", hostel: "Nilgiri", phone: "6005509374", email: "", img: "", fatherName: "KISHOR KUMAR", motherName: "KRISHMA DEVI", address: "R/O GOPALA CHACK BLOCK MARHEEN, DISTT. KATHUA PIN. 184148" },
  { admissionNo: "4076", name: "ATHARV SHARMA", class: "VI A", hostel: "Nilgiri", phone: "9858614419", email: "", img: "", fatherName: "TARUN SHARMA", motherName: "SONIA SHARMA", address: "SHIVA NAGAR, KATHUA" },
  { admissionNo: "5013", name: "NILESH GOUR", class: "VI A", hostel: "Nilgiri", phone: "9911283451", email: "", img: "", fatherName: "RAVINDER SHARMA", motherName: "MAMTA DEVI", address: "DEWAL, TEHSIL BILLAWAR, KATHUA" },
  { admissionNo: "5029", name: "MANIK SHARMA", class: "VI A", hostel: "Nilgiri", phone: "9682303028", email: "", img: "", fatherName: "TARA CHAND", motherName: "REENA DEVI", address: "PHINTER, BILLAWAR, DISTT. KATHUA" },
  { admissionNo: "4069", name: "MANIK PARIHAR", class: "VI B", hostel: "Nilgiri", phone: "8493989089", email: "", img: "", fatherName: "NARINDER KUMAR", motherName: "CHAMPA RANI", address: "VILL. DULLANGAL, TEHSIL BANI, DISTT. KATHUA, JK" },
  { admissionNo: "4074", name: "PUNYANSH GOSWAMI", class: "VI A", hostel: "Nilgiri", phone: "8493016204", email: "", img: "", fatherName: "SURAJ SHARMA", motherName: "EKTA DEVI", address: "VILL. BHADDU, TEHSIL BILLAWAR, DISTT. KATHUA, JK" },
  { admissionNo: "5035", name: "MOHIT CHIB", class: "VI B", hostel: "Nilgiri", phone: "8082164031", email: "", img: "", fatherName: "MANOHAR SINGH", motherName: "DEEPA DEVI", address: "VILL. DUNGA, DISTT. KATHUA, JK" },
  { admissionNo: "4065", name: "MOHIT KUMAR", class: "VI A", hostel: "Nilgiri", phone: "8082034327", email: "", img: "", fatherName: "PRITAM CHAND", motherName: "MADHU BALA", address: "VILL. HATLI, TEHSIL & DISTT. KATHUA, JK" },
  { admissionNo: "4075", name: "PRATYAKSH SEHOTRA", class: "VI A", hostel: "Nilgiri", phone: "9858692480", email: "", img: "", fatherName: "RAVI KUMAR", motherName: "CHANDA RANI", address: "VILL. BHADDU, TEHSIL BILLAWAR, DISTT. KATHUA, JK" },
  { admissionNo: "5003", name: "DIKSHIT KUMAR", class: "VI B", hostel: "Nilgiri", phone: "8494075481", email: "", img: "", fatherName: "ASHOK KUMAR", motherName: "SUNITA DEVI", address: "VILL. LAKHANPUR, TEHSIL & DISTT. KATHUA, JK" },
  { admissionNo: "5002", name: "SAMAKSH MAJOTRA", class: "VI A", hostel: "Nilgiri", phone: "9018454784", email: "", img: "", fatherName: "MEHAR CHAND", motherName: "SUNITA DEVI", address: "VILL. KHAKHYAL, TEHSIL NAGRI, DISTT. KATHUA, JK" },
  { admissionNo: "5037", name: "ARUN JABOTRA", class: "VI B", hostel: "Nilgiri", phone: "9622319669", email: "", img: "", fatherName: "SATPAUL JAPOTRA", motherName: "ANITA KUMARI", address: "VILL. DULLANGAL, TEHSIL BANI, DISTT. KATHUA, JK" },
  { admissionNo: "5006", name: "KANDARP BASSAY", class: "VI A", hostel: "Nilgiri", phone: "9055197550", email: "", img: "", fatherName: "HARBANS LAL", motherName: "JAGIRO DEVI", address: "TEHSIL NAGRI, DISTT. KATHUA, JK" },
  { admissionNo: "4039", name: "DHRUB VERMA", class: "VII A", hostel: "Nilgiri", phone: "7006793800", email: "", img: "", fatherName: "SUNIL KUMAR", motherName: "MAKHANI DEVI", address: "P.O. & VILL. MARA PATTI, BLOCK & TEHSIL MAHANPUR, DISTT. KATHUA PIN - 184202" },
];


let students = JSON.parse(localStorage.getItem("students_seed_v3") || "[]");

function migrateRemoveHouse(){
  // If old localStorage (v2) exists, migrate once and delete house field.
  const old = localStorage.getItem("students_seed_v2");
  if(old && !localStorage.getItem("students_seed_v3")){
    try{
      const parsed = JSON.parse(old || "[]").map(s=>{
        const clone = Object.assign({}, s);
        delete clone.house;
        return clone;
      });
      localStorage.setItem("students_seed_v3", JSON.stringify(parsed));
    }catch(e){}
  }
}
migrateRemoveHouse();

students = JSON.parse(localStorage.getItem("students_seed_v3") || "[]");

function syncCoreStudentsIntoLocal() {
  const byAdm = new Map(students.map(s => [s.admissionNo, s]));
  coreStudents.forEach(cs => {
    if (!cs.admissionNo) return;
    if (!byAdm.has(cs.admissionNo)) {
      const clone = Object.assign({}, cs);
      students.push(clone);
      byAdm.set(cs.admissionNo, clone);
    } else {
      Object.assign(byAdm.get(cs.admissionNo), cs);
      // ensure no house field remains
      delete byAdm.get(cs.admissionNo).house;
    }
  });
  localStorage.setItem("students_seed_v3", JSON.stringify(students));
}
syncCoreStudentsIntoLocal();

let leaves = JSON.parse(localStorage.getItem("leaves_v3") || "[]");
let timetable = JSON.parse(localStorage.getItem("timetable_v3") || "[]");
let tasks = JSON.parse(localStorage.getItem("tasks_v3") || "[]");

/* ==========================
   UTILS
========================== */
const $ = sel => document.querySelector(sel);
const $$ = sel => Array.from(document.querySelectorAll(sel));
const escapeHTML = (s="") => String(s).replace(/[&<>'"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;'}[c]));
function saveAll(){
  localStorage.setItem("leaves_v3", JSON.stringify(leaves));
  localStorage.setItem("timetable_v3", JSON.stringify(timetable));
  localStorage.setItem("tasks_v3", JSON.stringify(tasks));
  localStorage.setItem("students_seed_v3", JSON.stringify(students));
}
function formatDate(ts){return new Date(ts).toLocaleDateString();}
function debounce(fn, ms){
  let t; return (...a)=>{ clearTimeout(t); t=setTimeout(()=>fn(...a), ms); };
}

/* ==========================
   HOSTEL COUNTS (NEW)
========================== */
const HOSTELS = ["Aravali","Nilgiri","Shivalik","Udaigiri"];

function getHostelCounts(list){
  const counts = {};
  HOSTELS.forEach(h=>counts[h]=0);
  let unknown = 0;
  list.forEach(s=>{
    const h = (s.hostel || "").trim();
    if(counts.hasOwnProperty(h)) counts[h] += 1;
    else if(h) unknown += 1;
  });
  return {counts, unknown, total: list.length};
}

function getVisibleBaseListForStats(){
  // To avoid leaking full list to student/parent, show only their hostel + total self scope
  if(currentUserRole === "student" || currentUserRole === "parent"){
    const me = students.find(s => s.admissionNo === currentStudent);
    const myHostel = me?.hostel || "";
    const hostelList = myHostel ? students.filter(s => (s.hostel || "") === myHostel) : [];
    return {
      mode: "student",
      myHostel,
      hostelCount: hostelList.length
    };
  }
  // Teachers: show full list counts
  return {mode:"teacher"};
}

function renderHostelStats(){
  const wrap = $("#hostelStats");
  if(!wrap) return;

  const scope = getVisibleBaseListForStats();

  if(scope.mode === "student"){
    const hostelName = scope.myHostel || "‚Äî";
    wrap.innerHTML = `
      <div class="stat-chip">Your Hostel: <b>${escapeHTML(hostelName)}</b></div>
      <div class="stat-chip">Students in Hostel: <b>${escapeHTML(scope.hostelCount)}</b></div>
    `;
    return;
  }

  const {counts, unknown, total} = getHostelCounts(students);
  const chips = [];
  chips.push(`<div class="stat-chip">Total Students: <b>${escapeHTML(total)}</b></div>`);
  HOSTELS.forEach(h=>{
    chips.push(`<div class="stat-chip">${escapeHTML(h)}: <b>${escapeHTML(counts[h])}</b></div>`);
  });
  if(unknown){
    chips.push(`<div class="stat-chip">Other: <b>${escapeHTML(unknown)}</b></div>`);
  }
  wrap.innerHTML = chips.join("");
}

/* ==========================
   SESSION / RBAC
========================== */
const SESSION_KEY = "jnv_session_v3";
let session = JSON.parse(localStorage.getItem(SESSION_KEY) || "null");
let currentUserRole = session?.role || "";
let currentStudent = session?.admissionNo || "";
let currentUserName = session?.name || "";

const roleBadge = $("#roleBadge");
const whoamiText = $("#whoamiText");

function setRBACVisibility(){
  $$(".rbac").forEach(el => el.classList.add("hidden"));
  if(currentUserRole === "teacher1"){
    $$(".r-teacher1").forEach(el => el.classList.remove("hidden"));
  } else if(currentUserRole === "teacher2"){
    $$(".r-teacher2").forEach(el => el.classList.remove("hidden"));
    $("#exportStudentsBtn")?.classList.remove("hidden");
  }
  if(currentUserRole === "student" || currentUserRole === "parent"){
    showSection("students");
  }
  roleBadge.textContent = currentUserRole ? currentUserRole.toUpperCase() : "GUEST";
  whoamiText.textContent = currentUserName || "‚Äî";
  renderHostelStats();
}

/* ==========================
   LOGIN
========================== */
const MAX_ATTEMPTS = 5;
let attemptInfo = JSON.parse(localStorage.getItem("login_attempts") || '{"count":0,"until":0}');

function lockCheck(){
  const now = Date.now();
  if(attemptInfo.until && now < attemptInfo.until){
    return Math.ceil((attemptInfo.until - now)/1000);
  }
  return 0;
}
function registerFail(){
  const now = Date.now();
  attemptInfo.count = (attemptInfo.count||0) + 1;
  if(attemptInfo.count >= MAX_ATTEMPTS){
    attemptInfo.until = now + 60_000;
    attemptInfo.count = 0;
  }
  localStorage.setItem("login_attempts", JSON.stringify(attemptInfo));
}
function registerSuccess(){
  attemptInfo = {count:0, until:0};
  localStorage.setItem("login_attempts", JSON.stringify(attemptInfo));
}

$("#loginBtn").addEventListener("click", ()=>{
  const lockLeft = lockCheck();
  const err = $("#loginError");
  if(lockLeft){
    if(err){
      err.textContent = `Too many attempts. Try again in ${lockLeft}s.`;
      err.style.display = "block";
    }
    return;
  }
  const email = $("#email").value.trim().toLowerCase();
  const pass = $("#password").value;
  const user = users.find(u =>
    (u.email.toLowerCase()===email || (u.admissionNo && u.admissionNo.toLowerCase()===email)) &&
    u.password===pass
  );
  if(!user){
    registerFail();
    if(err){
      err.textContent = "Invalid credentials.";
      err.style.display = "block";
    }
    return;
  }
  registerSuccess();
  if(err){ err.style.display = "none"; }

  session = {role:user.role, admissionNo:user.admissionNo||"", name:user.name||user.email, email:user.email};
  localStorage.setItem(SESSION_KEY, JSON.stringify(session));
  currentUserRole = session.role;
  currentStudent = session.admissionNo || "";
  currentUserName = session.name || "";
  startApp();
});

/* ==========================
   NAV + DRAWER
========================== */
const drawer = $("#drawer");
$("#openDrawerBtn").addEventListener("click", ()=> drawer.classList.toggle("open"));
document.addEventListener("keydown", (e)=>{
  if(e.key === "Escape") drawer.classList.remove("open");
});
drawer.addEventListener("click", (e)=>{
  if(e.target.matches("button[data-section]")){
    showSection(e.target.getAttribute("data-section"));
    drawer.classList.remove("open");
  }
});

function showSection(id){
  $$(".section").forEach(s=>s.classList.remove("active"));
  $("#"+id).classList.add("active");
}

/* menu: Add / Manage students */
$("#addStudentMenuBtn").addEventListener("click", ()=>{
  showSection("students");
  drawer.classList.remove("open");
  const panel = $("#addStudentPanel");
  if(panel){
    panel.classList.remove("hidden");
    panel.scrollIntoView({behavior:"smooth", block:"start"});
  }
});

/* ==========================
   STUDENTS
========================== */
const PAGE_SIZE = 8;
let filteredStudents = [];
let pageIndex = 0;

function filterStudents(){
  const q = $("#studentSearch").value.trim().toLowerCase();
  const hostel = $("#hostelFilter").value;

  filteredStudents = students.filter(s=>{
    if((currentUserRole==="student"||currentUserRole==="parent") && s.admissionNo!==currentStudent) return false;
    if(hostel && s.hostel !== hostel) return false;
    if(!q) return true;
    return (s.name || "").toLowerCase().includes(q) || (s.admissionNo || "").toLowerCase().includes(q);
  });

  pageIndex = 0;
  renderStudentsPage();
  renderHostelStats(); // keep counts updated
}

function renderStudentsPage(){
  const grid = $("#studentGrid");
  if(pageIndex === 0) grid.innerHTML = "";

  const start = pageIndex * PAGE_SIZE;
  const slice = filteredStudents.slice(start, start + PAGE_SIZE);
  slice.forEach(s=>grid.appendChild(studentCard(s)));

  pageIndex++;
  const hasMore = (pageIndex * PAGE_SIZE) < filteredStudents.length;
  $("#loadMoreBtn").classList.toggle("hidden", !hasMore);
}

function studentCard(s){
  const card = document.createElement("div");
  card.className = "card";
  const partialCount = leaves.filter(l=>l.admissionNo===s.admissionNo && l.type==="partial").length;
  const fullCount = leaves.filter(l=>l.admissionNo===s.admissionNo && l.type==="full").length;

  card.innerHTML = `
    <div class="avatar">${ s.img ? `<img src="${escapeHTML(s.img)}" alt="${escapeHTML(s.name)}">` : "üßë" }</div>
    <h3>${escapeHTML(s.name || "")}</h3>
    <div class="meta">Admission No: ${escapeHTML(s.admissionNo || "")}</div>
    <div class="kv">
      <div>Class</div><div>${escapeHTML(s.class || "")}</div>
      <div>Hostel</div><div>${escapeHTML(s.hostel || "")}</div>
      <div>Phone</div><div>${escapeHTML(s.phone || "")}</div>
      <div>Father</div><div>${escapeHTML(s.fatherName || "")}</div>
      <div>Mother</div><div>${escapeHTML(s.motherName || "")}</div>
      <div>Address</div><div>${escapeHTML(s.address || "")}</div>
      <div>Leaves</div><div>Partial: ${partialCount} | Full: ${fullCount}</div>
    </div>
  `;
  if(currentUserRole==="teacher1"){
    const editIcon = document.createElement("button");
    editIcon.className = "edit-icon";
    editIcon.type = "button";
    editIcon.innerHTML = "‚úèÔ∏è";
    editIcon.addEventListener("click", ()=>openEditStudent(s.admissionNo));
    card.appendChild(editIcon);

    const actions = document.createElement("div");
    actions.className = "actions";

    const leavesBtn = document.createElement("button");
    leavesBtn.className = "toolbar-btn";
    leavesBtn.textContent = "Download Leaves";
    leavesBtn.addEventListener("click", ()=>downloadStudentLeave(s.admissionNo));
    actions.appendChild(leavesBtn);

    const delBtn = document.createElement("button");
    delBtn.className = "warn";
    delBtn.textContent = "Delete";
    delBtn.addEventListener("click", ()=>deleteStudent(s.admissionNo));
    actions.appendChild(delBtn);

    card.appendChild(actions);
  }
  return card;
}

$("#studentSearch").addEventListener("input", debounce(filterStudents, 200));
$("#hostelFilter").addEventListener("change", filterStudents);
$("#loadMoreBtn").addEventListener("click", renderStudentsPage);

/* ==========================
   MANUAL ADD STUDENT (Teacher1)
========================== */
function addStudentManual(){
  if(currentUserRole !== "teacher1"){
    alert("Only Teacher1 can add students.\n‡§ï‡•á‡§µ‡§≤ Teacher1 ‡§π‡•Ä ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§");
    return;
  }
  const admissionNo = ($("#newAdmissionNo").value || "").trim();
  const name = ($("#newStudentName").value || "").trim();
  if(!admissionNo || !name){
    alert("Admission No and Name are required.\n‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§î‡§∞ ‡§®‡§æ‡§Æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡§Ç‡•§");
    return;
  }
  if(students.some(s => s.admissionNo === admissionNo)){
    alert("Student with this Admission No already exists.\n‡§Ø‡§π ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§Æ‡•å‡§ú‡•Ç‡§¶ ‡§π‡•à‡•§");
    return;
  }
  const s = {
    admissionNo,
    name,
    class: ($("#newClass").value || "").trim(),
    hostel: $("#newHostel").value || "",
    phone: ($("#newPhone").value || "").trim(),
    email: ($("#newEmail").value || "").trim(),
    img:"",
    fatherName: ($("#newFather").value || "").trim(),
    motherName: ($("#newMother").value || "").trim(),
    address: ($("#newAddress").value || "").trim()
  };
  students.push(s);
  localStorage.setItem("students_seed_v3", JSON.stringify(students));
  filterStudents();
  searchLeaveStudent();
  ["newAdmissionNo","newStudentName","newClass","newPhone","newEmail","newFather","newMother","newAddress"].forEach(id=>$("#"+id).value="");
  $("#newHostel").value = "";
  alert("Student added and saved.\n‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§π‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ‡•§");
}
$("#addStudentBtn").addEventListener("click", addStudentManual);

/* ==========================
   EDIT / DELETE STUDENT (Teacher1)
========================== */
let editingAdmissionNo = null;

function openEditStudent(adm){
  if(currentUserRole !== "teacher1"){
    alert("Only Teacher1 can edit students.\n‡§ï‡•á‡§µ‡§≤ Teacher1 ‡§π‡•Ä ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∏‡§Ç‡§™‡§æ‡§¶‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§");
    return;
  }
  const s = students.find(st => st.admissionNo === adm);
  if(!s){
    alert("Student not found.\n‡§õ‡§æ‡§§‡•ç‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§");
    return;
  }
  editingAdmissionNo = adm;
  $("#editAdmissionNo").textContent = s.admissionNo || "";
  $("#editName").value = s.name || "";
  $("#editClass").value = s.class || "";
  $("#editHostel").value = s.hostel || "";
  $("#editPhone").value = s.phone || "";
  $("#editEmail").value = s.email || "";
  $("#editFather").value = s.fatherName || "";
  $("#editMother").value = s.motherName || "";
  $("#editAddress").value = s.address || "";
  $("#studentModalBackdrop").classList.remove("hidden");
}

function closeStudentModal(){
  $("#studentModalBackdrop").classList.add("hidden");
  editingAdmissionNo = null;
}

function saveStudentEdit(){
  if(!editingAdmissionNo) return;
  const s = students.find(st => st.admissionNo === editingAdmissionNo);
  if(!s){
    alert("Student not found.\n‡§õ‡§æ‡§§‡•ç‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§");
    return;
  }
  s.name = ($("#editName").value || "").trim();
  s.class = ($("#editClass").value || "").trim();
  s.hostel = $("#editHostel").value || "";
  s.phone = ($("#editPhone").value || "").trim();
  s.email = ($("#editEmail").value || "").trim();
  s.fatherName = ($("#editFather").value || "").trim();
  s.motherName = ($("#editMother").value || "").trim();
  s.address = ($("#editAddress").value || "").trim();

  localStorage.setItem("students_seed_v3", JSON.stringify(students));
  closeStudentModal();
  filterStudents();
  searchLeaveStudent();
  alert("Student details updated.\n‡§õ‡§æ‡§§‡•ç‡§∞ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§Ö‡§™‡§°‡•á‡§ü ‡§π‡•ã ‡§ó‡§è ‡§π‡•à‡§Ç‡•§");
}

function deleteStudent(adm){
  if(currentUserRole !== "teacher1"){
    alert("Only Teacher1 can delete students.\n‡§ï‡•á‡§µ‡§≤ Teacher1 ‡§π‡•Ä ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§π‡§ü‡§æ‡§®‡•á ‡§ï‡•Ä ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§∞‡§ñ‡§§‡•á ‡§π‡•à‡§Ç‡•§");
    return;
  }
  if(!confirm("Delete this student?\n‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§á‡§∏ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) return;
  students = students.filter(s => s.admissionNo !== adm);
  localStorage.setItem("students_seed_v3", JSON.stringify(students));
  filterStudents();
  searchLeaveStudent();
  alert("Student deleted.\n‡§õ‡§æ‡§§‡•ç‡§∞ ‡§π‡§ü‡§æ‡§Ø‡§æ ‡§ó‡§Ø‡§æ‡•§");
}

$("#editCloseBtn").addEventListener("click", closeStudentModal);
$("#editCancelBtn").addEventListener("click", closeStudentModal);
$("#editSaveBtn").addEventListener("click", saveStudentEdit);
$("#studentModalBackdrop").addEventListener("click", (e)=>{
  if(e.target === e.currentTarget){
    closeStudentModal();
  }
});

/* ==========================
   LEAVES
========================== */
function searchLeaveStudent(){
  const val = ($("#leaveSearchInput").value || "").trim().toLowerCase();
  const list = students.filter(s=> (s.name || "").toLowerCase().includes(val) || (s.admissionNo || "").toLowerCase().includes(val));
  const sel = $("#leaveStudent");
  sel.innerHTML = "";
  list.forEach(s=>{
    const opt = document.createElement("option");
    opt.value = s.admissionNo;
    opt.textContent = `${s.name} (${s.admissionNo})`;
    sel.appendChild(opt);
  });
}

function applyLeave(){
  const admissionNo = $("#leaveStudent").value;
  const type = document.querySelector('input[name="leaveType"]:checked').value;
  const from = $("#leaveFrom").value;
  const to = $("#leaveTo").value;
  const reason = ($("#leaveReason").value || "").trim();
  const parent = ($("#leaveParent").value || "").trim();
  if(!admissionNo || !from || !to){
    alert("Fill all mandatory fields.\n‡§∏‡§≠‡•Ä ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç‡•§");
    return;
  }

  leaves.push({admissionNo, type, from, to, reason, parent, date: formatDate(Date.now())});
  saveAll();
  displayLeaveHistory();
  filterStudents();
  alert("Leave applied successfully.\n‡§Ö‡§µ‡§ï‡§æ‡§∂ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§¶‡§∞‡•ç‡§ú ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§");
}

function displayLeaveHistory(){
  const t = $("#leaveHistory");
  const hdrAction = currentUserRole==="teacher1" ? "<th>Action</th>" : "";
  t.innerHTML = `<tr><th>Admission No</th><th>Type</th><th>From</th><th>To</th><th>Reason</th><th>Parent</th><th>Date Applied</th>${hdrAction}</tr>`;
  leaves.forEach((l,idx)=>{
    if((currentUserRole==="student"||currentUserRole==="parent") && l.admissionNo !== currentStudent) return;
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${escapeHTML(l.admissionNo || "")}</td>
      <td>${escapeHTML(l.type || "")}</td>
      <td>${escapeHTML(l.from || "")}</td>
      <td>${escapeHTML(l.to || "")}</td>
      <td>${escapeHTML(l.reason || "")}</td>
      <td>${escapeHTML(l.parent || "")}</td>
      <td>${escapeHTML(l.date || "")}</td>
    `;
    if(currentUserRole==="teacher1"){
      const td = document.createElement("td");
      const btn = document.createElement("button");
      btn.className = "warn";
      btn.textContent = "Delete";
      btn.addEventListener("click", ()=>deleteLeave(idx));
      td.appendChild(btn);
      tr.appendChild(td);
    }
    t.appendChild(tr);
  });
}

function deleteLeave(index){
  if(!confirm("Delete this leave record?\n‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ø‡§π ‡§Ö‡§µ‡§ï‡§æ‡§∂ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) return;
  leaves.splice(index,1);
  saveAll();
  displayLeaveHistory();
  filterStudents();
}

function downloadLeaveHistory(){
  const wb = XLSX.utils.book_new();
  const ws = XLSX.utils.json_to_sheet(leaves);
  XLSX.utils.book_append_sheet(wb, ws, "Leaves");
  XLSX.writeFile(wb, "LeaveHistory.xlsx");
}

function downloadStudentLeave(admissionNo){
  try{
    const sLeaves = leaves.filter(l=>l.admissionNo===admissionNo);
    if(!sLeaves || sLeaves.length === 0){
      alert("No leave records found for this student.\n‡§á‡§∏ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ã‡§à ‡§Ö‡§µ‡§ï‡§æ‡§∂ ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§");
      return;
    }
    const wb = XLSX.utils.book_new();
    const normalized = sLeaves.map(l => ({
      admissionNo: l.admissionNo || "",
      type: l.type || "",
      from: l.from || "",
      to: l.to || "",
      reason: l.reason || "",
      parent: l.parent || "",
      dateApplied: l.date || ""
    }));
    const ws = XLSX.utils.json_to_sheet(normalized);
    XLSX.utils.book_append_sheet(wb, ws, "Leaves");
    XLSX.writeFile(wb, `Leaves_${admissionNo}.xlsx`);
  }catch(err){
    console.error("downloadStudentLeave error:", err);
    alert("Error downloading leaves.\n‡§Ö‡§µ‡§ï‡§æ‡§∂ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø‡•§");
  }
}

/* ==========================
   HOSTEL TASKS
========================== */
function addTask(){
  const hostel = $("#taskHostel").value;
  const date = $("#taskDate").value;
  const desc = ($("#taskDesc").value || "").trim();
  if(!hostel || !date || !desc){
    alert("Fill all fields.\n‡§∏‡§≠‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç‡•§");
    return;
  }
  tasks.push({hostel, date, desc});
  saveAll();
  displayTasks();
}
function displayTasks(){
  const t = $("#taskTable");
  const hdrAction = currentUserRole==="teacher1" ? "<th>Action</th>" : "";
  t.innerHTML = `<tr><th>Hostel</th><th>Date</th><th>Task</th>${hdrAction}</tr>`;
  tasks.forEach((task,idx)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${escapeHTML(task.hostel || "")}</td><td>${escapeHTML(task.date || "")}</td><td>${escapeHTML(task.desc || "")}</td>`;
    if(currentUserRole==="teacher1"){
      const td = document.createElement("td");
      const btn = document.createElement("button");
      btn.className="warn"; btn.textContent="Delete";
      btn.addEventListener("click", ()=>deleteTask(idx));
      td.appendChild(btn); tr.appendChild(td);
    }
    t.appendChild(tr);
  });
}
function deleteTask(index){
  if(!confirm("Delete this task?\n‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ø‡§π ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) return;
  tasks.splice(index,1);
  saveAll();
  displayTasks();
}
function downloadTasks(){
  const wb = XLSX.utils.book_new();
  const ws = XLSX.utils.json_to_sheet(tasks);
  XLSX.utils.book_append_sheet(wb, ws, "Tasks");
  XLSX.writeFile(wb, "HostelTasks.xlsx");
}

/* ==========================
   TIMETABLE (Teacher2)
========================== */
function addTimetable(){
  if(currentUserRole !== "teacher2"){
    alert("Only Teacher2 can add timetable.\n‡§ï‡•á‡§µ‡§≤ Teacher2 ‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§ø‡§£‡•Ä ‡§ú‡•ã‡§°‡§º ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§");
    return;
  }
  const cls = $("#ttClass").value;
  const date = $("#ttDate").value;
  const time = $("#ttTime").value;
  const topic = ($("#ttTopic").value || "").trim();
  const teacher = ($("#ttTeacher").value || "").trim();
  if(!date || !time || !topic || !teacher){
    alert("Fill all fields.\n‡§∏‡§≠‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç‡•§");
    return;
  }
  timetable.push({cls, date, time, topic, teacher});
  saveAll();
  displayTimetable();
}
function displayTimetable(){
  const t = $("#timetableTable");
  t.innerHTML = `<tr><th>Class</th><th>Date</th><th>Time</th><th>Topic</th><th>Teacher</th><th>Action</th></tr>`;
  timetable.forEach((row, i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${escapeHTML(row.cls || "")}</td>
      <td>${escapeHTML(row.date || "")}</td>
      <td>${escapeHTML(row.time || "")}</td>
      <td>${escapeHTML(row.topic || "")}</td>
      <td>${escapeHTML(row.teacher || "")}</td>
      <td>${ currentUserRole==="teacher2" ? `<button class="warn" data-del="${i}">Delete</button>` : "-" }</td>
    `;
    t.appendChild(tr);
  });
  t.querySelectorAll("button[data-del]").forEach(btn=>{
    btn.addEventListener("click", (e)=>{
      if(currentUserRole !== "teacher2"){
        alert("Only Teacher2 can delete timetable.\n‡§ï‡•á‡§µ‡§≤ Teacher2 ‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§ø‡§£‡•Ä ‡§π‡§ü‡§æ ‡§∏‡§ï‡§§‡§æ ‡§π‡•à‡•§");
        return;
      }
      if(!confirm("Delete this timetable entry?\n‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ø‡§π ‡§∏‡§Æ‡§Ø ‡§∏‡§æ‡§∞‡§ø‡§£‡•Ä ‡§π‡§ü‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) return;
      const idx = +e.currentTarget.getAttribute("data-del");
      timetable.splice(idx,1);
      saveAll();
      displayTimetable();
    });
  });
}
function downloadTimetable(){
  const wb = XLSX.utils.book_new();
  const ws = XLSX.utils.json_to_sheet(timetable);
  XLSX.utils.book_append_sheet(wb, ws, "Timetable");
  XLSX.writeFile(wb, "Timetable.xlsx");
}

/* ==========================
   IMPORT / EXPORT STUDENTS
========================== */
$("#uploadBtn").addEventListener("click", ()=> $("#uploadExcel").click());
$("#uploadExcel").addEventListener("change", (event)=>{
  const file = event.target.files[0]; if(!file) return;
  const reader = new FileReader();
  reader.onload = e=>{
    const data = new Uint8Array(e.target.result);
    const wb = XLSX.read(data, {type:"array"});
    const ws = wb.Sheets[wb.SheetNames[0]];
    const rows = XLSX.utils.sheet_to_json(ws);
    rows.forEach(r=>{
      const s = {
        admissionNo: r.admissionNo || r["Admission No"] || r["admission_no"] || "",
        name: r.name || r["Name"] || "",
        class: r.class || r["Class"] || "",
        hostel: r.hostel || r["Hostel"] || "",
        phone: r.phone || r["Phone"] || "",
        email: r.email || r["Email"] || "",
        img: r.img || r["Image"] || "",
        fatherName: r.fatherName || r["Father Name"] || "",
        motherName: r.motherName || r["Mother Name"] || "",
        address: r.address || r["Address"] || ""
      };
      if(s.admissionNo){
        const existing = students.find(st => st.admissionNo === s.admissionNo);
        if(existing){
          Object.assign(existing, s);
          delete existing.house;
        } else {
          students.push(s);
        }
      }
    });
    localStorage.setItem("students_seed_v3", JSON.stringify(students));
    filterStudents();
    searchLeaveStudent();
    alert("Students uploaded.\n‡§õ‡§æ‡§§‡•ç‡§∞ ‡§°‡•á‡§ü‡§æ ‡§Ö‡§™‡§≤‡•ã‡§° ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§");
  };
  reader.readAsArrayBuffer(file);
});
$("#exportStudentsBtn").addEventListener("click", ()=>{
  const wb = XLSX.utils.book_new();
  const ws = XLSX.utils.json_to_sheet(students);
  XLSX.utils.book_append_sheet(wb, ws, "Students");
  XLSX.writeFile(wb, "Students.xlsx");
});

/* ==========================
   LOAD CORE STUDENT DATA
========================== */
function loadStudentData() {
  if (!confirm("Are you sure you want to load the latest student data from app code?\n‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§®‡§ø‡§∂‡•ç‡§ö‡§ø‡§§ ‡§π‡•à‡§Ç ‡§ï‡§ø ‡§Ü‡§™ ‡§ê‡§™ ‡§ï‡•ã‡§° ‡§∏‡•á ‡§®‡§Ø‡§æ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§°‡•á‡§ü‡§æ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) return;
  if (!confirm("This will update existing students with core list (local additions will stay).\n‡§Ø‡§π ‡§ï‡•ã‡§° ‡§µ‡§æ‡§≤‡•Ä ‡§∏‡•Ç‡§ö‡•Ä ‡§∏‡•á ‡§°‡•á‡§ü‡§æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§ó‡§æ, ‡§≤‡•ã‡§ï‡§≤ ‡§ú‡•ã‡§°‡§º‡•á ‡§ó‡§è ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§¨‡§®‡•á ‡§∞‡§π‡•á‡§Ç‡§ó‡•á‡•§")) return;
  if (!confirm("Final confirmation ‚Äî proceed?\n‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§™‡•Å‡§∑‡•ç‡§ü‡§ø ‚Äî ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§Ü‡§ó‡•á ‡§¨‡§¢‡§º‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç?")) return;

  try {
    syncCoreStudentsIntoLocal();
    filterStudents();
    searchLeaveStudent();
    alert("Latest student data synced from core list.\n‡§®‡§Ø‡§æ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã‡§∞ ‡§∏‡•Ç‡§ö‡•Ä ‡§∏‡•á ‡§∏‡§ø‡§Ç‡§ï ‡§π‡•ã ‡§ó‡§Ø‡§æ‡•§");
  } catch (e) {
    console.error("Error updating student data:", e);
    alert("Error updating data.\n‡§°‡•á‡§ü‡§æ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡§§‡•á ‡§∏‡§Æ‡§Ø ‡§§‡•ç‡§∞‡•Å‡§ü‡§ø ‡§π‡•Å‡§à‡•§");
  }
}

/* ==========================
   DOWNLOAD BUTTONS
========================== */
$("#downloadLeaveHistoryBtn").addEventListener("click", downloadLeaveHistory);
$("#downloadTasksBtn").addEventListener("click", downloadTasks);
$("#downloadTimetableBtn").addEventListener("click", downloadTimetable);

/* ==========================
   BIND ACTIONS
========================== */
$("#applyLeaveBtn").addEventListener("click", applyLeave);
$("#leaveSearchInput").addEventListener("input", debounce(searchLeaveStudent, 200));
$("#addTaskBtn").addEventListener("click", addTask);
$("#addTimetableBtn").addEventListener("click", addTimetable);

/* Theme toggle button click */
document.getElementById("themeToggleBtn").addEventListener("click", ()=>{
  const current = document.body.getAttribute("data-theme") || "dark";
  applyTheme(current === "dark" ? "light" : "dark");
});

/* ==========================
   LOGOUT
========================== */
$("#logoutBtn").addEventListener("click", ()=>{
  localStorage.removeItem(SESSION_KEY);
  location.reload();
});

/* ==========================
   START APP
========================== */
function startApp(){
  $("#loginView").style.display = "none";
  $("#app").style.display = "block";

  setRBACVisibility();

  filterStudents();
  displayLeaveHistory();
  displayTimetable();
  displayTasks();

  searchLeaveStudent();
  renderHostelStats();
}

/* On load: resume session if present */
if(session && session.role){
  startApp();
}else{
  $("#loginView").style.display = "grid";
}
</script>
</body>
</html>







